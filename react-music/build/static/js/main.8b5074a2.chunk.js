(this["webpackJsonpreact-music"]=this["webpackJsonpreact-music"]||[]).push([[0],{67:function(e,t,n){},68:function(e,t,n){},71:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),a=n(18),r=n.n(a),l=(n(67),n(7)),c=n(4),s=(n(68),n(11)),u=n(6),d=n.n(u),p=n(14);function v(){return(v=Object(p.a)(d.a.mark((function e(t,n){var i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i="".concat("","/api/ytdl/download-video-ytdl-player2?videoUrl=").concat(encodeURIComponent("https://www.youtube.com/watch?v=".concat(t))),o=new Audio(i),n.me.src=i,o.crossOrigin="anonymous",n.me.muted=!0,console.log(o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=Object(p.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/api/ytdl/download-video-ytdl-player3?videoId=").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoId:t})}).then((function(e){return e.text().then((function(e){console.log(e),n.me.src=e}))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return(b=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/api/ytdl/search-by-id"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({videoId:t})});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(p.a)(d.a.mark((function e(t,n){var i,o=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.me.src=URL.createObjectURL(null===n||void 0===n?void 0:n.mediaSource),e.next=3,m(t);case 3:i=e.sent,console.log(i),fetch("".concat("","/api/ytdl/download-video-ytdl-player1"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({videoUrl:"https://www.youtube.com/watch?v="+t})}).then(function(){var e=Object(p.a)(d.a.mark((function e(t){var a,r,l,c,s,u,p,v,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.body.getReader(),r=[],(l=n.mediaSource.addSourceBuffer(o.getMIMEType(i.ext,i.acodec))).mode="sequence";case 4:if(null===(s=c)||void 0===s?void 0:s.done){e.next=16;break}return e.next=7,a.read();case 7:if(c=e.sent,r.push(null===(u=c)||void 0===u||null===(p=u.value)||void 0===p?void 0:p.buffer),null!=l&&r.length>0&&!l.updating&&null!=r[0]&&null!=(null===(f=n.mediaSource)||void 0===f?void 0:f.sourceBuffers[0]))try{null===l||void 0===l||l.appendBuffer(r.shift())}catch(d){}if(!(null===(v=c)||void 0===v?void 0:v.done)){e.next=14;break}return console.log("Fetch Data Complete.."),l.addEventListener("updateend",(function(){l.updating||"open"!==n.mediaSource.readyState||(r.length>0&&!l.updating&&null!=r[0]?(console.log("Remaining chunks =>",r.length),console.log(r),console.log(l.updating),void 0!==l&&l.appendBuffer(r.shift())):null!=l&&(null==r[0]||r.length<=0)&&!l.updating&&(console.log("stream end"),n.mediaSource.endOfStream()))})),e.abrupt("break",16);case 14:e.next=4;break;case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g={setPlayButton:function(e,t){switch(t){case"paused":e.pause();break;case"playing":e.play().then((function(){})).catch((function(e){}))}},getVideoInfo:m,getMIMEType:function(e,t){switch(e){case"webm":return"audio/".concat(e,";codecs=").concat(t);case"m4a":return"audio/mp4;codecs=".concat(t);default:return"audio/webm;codecs=opus"}},setSource:function(e,t){return j.apply(this,arguments)},setAudioSource:function(e,t){return v.apply(this,arguments)},setAudioUrl:function(e,t){return f.apply(this,arguments)},setPlayerApperance:function(e,t){switch(t){case"max":e.preventDefault(),document.getElementsByClassName("mini-player")[0].style.height="calc(500%)",document.getElementsByClassName("mini-player")[0].style.transform="translateY(calc(-300%))";break;case"min":e.preventDefault(),document.getElementsByClassName("playerContainer")[0].style.transform="translateY(calc(100%))"}},setNotificationLabel:function(e){"mediaSession"in navigator&&(console.log("media session works"),navigator.mediaSession.metadata=new window.MediaMetadata({title:e.trackTitle,artwork:[{src:null==e.albumArtUrl?"":e.albumArtUrl,sizes:"512x512",type:"image/png"}]}))}},h=n(1),y=o.a.createContext(null),O={me:document.createElement("audio"),mediaSource:new MediaSource,sourceBuffer:null,searchResult:null,relatedVideos:null,menuOpen:!1,snackbarMsg:!1,themeSelectValue:"Default",currentSongDetails:{},testProp:{},audioState:"paused",bufferState:"loading",playerState:null,relatedVideoSourceId:"",searchKey:"",previousTrack:{},nextTrack:{},nextTrackId:"",trendingSongs:null,pickedSongs:null},x=function(e,t){switch(t.type){case"setCurrentSong":return Object(l.a)(Object(l.a)({},e),{},{currentSongDetails:t.snippet});case"setRelatedVideos":return Object(l.a)(Object(l.a)({},e),{},{relatedVideos:t.snippet});case"setThemeSelectValue":return Object(l.a)(Object(l.a)({},e),{},{themeSelectValue:t.snippet});case"setAudioState":return g.setPlayButton(O.me,t.snippet),Object(l.a)(Object(l.a)({},e),{},{audioState:t.snippet});case"setBufferState":return Object(l.a)(Object(l.a)({},e),{},{bufferState:t.snippet});case"setPlayerState":return Object(l.a)(Object(l.a)({},e),{},{playerState:t.snippet});case"setRelatedVideoSourceId":return Object(l.a)(Object(l.a)({},e),{},{relatedVideoSourceId:t.snippet});case"setSearchKeyValue":return Object(l.a)(Object(l.a)({},e),{},{searchKey:t.snippet});case"setSearchResult":return Object(l.a)(Object(l.a)({},e),{},{searchResult:t.snippet});case"setNextSong":return Object(l.a)(Object(l.a)({},e),{},{nextTrack:t.snippet});case"setPreviousSong":return Object(l.a)(Object(l.a)({},e),{},{previousTrack:t.snippet});case"setNextTrackId":return Object(l.a)(Object(l.a)({},e),{},{nextTrackId:t.snippet});case"setTrendingSongs":return Object(l.a)(Object(l.a)({},e),{},{trendingSongs:t.snippet});case"setPickedSongs":return Object(l.a)(Object(l.a)({},e),{},{pickedSongs:t.snippet});case"setStore":return t.snippet;default:return e}},S=function(e){var t=Object(i.useReducer)(x,O);return Object(h.jsx)(y.Provider,{value:t,children:e.children})},k=(n(71),n(104));function I(){var e,t,n=Object(i.useContext)(y),o=Object(c.a)(n,2),a=o[0],r=o[1],l=Object(s.f)();function u(e){var t,n,i;e.preventDefault(),r({type:"setCurrentSong",snippet:{videoId:null===a||void 0===a||null===(t=a.currentSongDetails)||void 0===t?void 0:t.videoId,trackTitle:null===a||void 0===a||null===(n=a.currentSongDetails)||void 0===n?void 0:n.trackTitle,albumArtUrl:null===a||void 0===a||null===(i=a.currentSongDetails)||void 0===i?void 0:i.albumArtUrl}}),function(e){g.setPlayerApperance(e,"max"),setTimeout((function(){var e;r({type:"setPlayerState",snippet:"max"}),l.push("/player1/".concat(null===a||void 0===a||null===(e=a.currentSongDetails)||void 0===e?void 0:e.videoId))}),200)}(e)}return Object(i.useEffect)((function(){}),[a.currentSongDetails]),Object(h.jsxs)("div",{className:"mini-player",onClick:function(e){u(e)},children:[Object(h.jsx)("div",{class:"album-art image-box",children:Object(h.jsx)("img",{src:null===a||void 0===a||null===(e=a.currentSongDetails)||void 0===e?void 0:e.albumArtUrl,alt:"album art"})}),Object(h.jsx)("div",{id:"scroll-container",children:Object(h.jsx)("div",{id:"scroll-text",children:null===a||void 0===a||null===(t=a.currentSongDetails)||void 0===t?void 0:t.trackTitle})}),"loading"===a.bufferState?Object(h.jsx)("div",{children:Object(h.jsx)(k.a,{})}):Object(h.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:Object(h.jsx)("button",{onClick:function(e){!function(e){e.stopPropagation(),"playing"===a.audioState?(a.me.pause(),r({type:"setAudioState",snippet:"paused"})):"paused"===a.audioState?(a.me.play(),r({type:"setAudioState",snippet:"playing"})):"error"===a.audioState&&r({type:"setAudioState",snippet:"error"})}(e)},children:Object(h.jsx)("span",{className:"material-icons",children:function(){switch(a.audioState){case"paused":return"play_arrow";case"playing":return"pause";case"error":return"music_off";default:return"play_arrow"}}()})})})]})}var w=n(10),B=(n(76),n(39));n(77);var E=function(e){var t,n=Object(i.useState)(),o=Object(c.a)(n,2),a=o[0],r=o[1],l=Object(i.useState)(!0),s=Object(c.a)(l,2),u=s[0],v=s[1],f=Object(i.useContext)(y),m=Object(c.a)(f,2),b=m[0],j=m[1],O=Object(i.useState)(!1),x=Object(c.a)(O,2),S=x[0],I=x[1];function E(e){var t;console.log("track change cleanup"),console.log(null===(t=b.mediaSource)||void 0===t?void 0:t.sourceBuffers[0]);try{var n,i;b.mediaSource.removeSourceBuffer(null===(n=b.store.mediaSource)||void 0===n?void 0:n.sourceBuffers[0]),console.log(null===(i=b.mediaSource)||void 0===i?void 0:i.sourceBuffers[0])}catch(o){}j({type:"setBufferState",snippet:"loading"}),j({type:"setCurrentSong",snippet:{videoId:null===e||void 0===e?void 0:e.videoId,trackTitle:null===e||void 0===e?void 0:e.title,albumArtUrl:null===e||void 0===e?void 0:e.thumbnails.at(-1).url}}),null!=document.getElementById("buffered-amount")&&(document.getElementById("buffered-amount").style.width="0%"),null!=document.getElementById("progress-amount")&&(document.getElementById("progress-amount").style.width="0px"),null!=document.getElementById("progress-scrub")&&(document.getElementById("progress-scrub").style.left="0px"),b.me.removeAttribute("src"),b.me.load(),function(e){return C.apply(this,arguments)}(null===e||void 0===e?void 0:e.videoId).then((function(){console.log("track loaded"),j({type:"setBufferState",snippet:"loaded"})}))}function C(){return(C=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.setAudioUrl(t,b);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){var e,t,n;b.relatedVideoSourceId!==(null===(e=b.currentSongDetails)||void 0===e?void 0:e.videoId)?(console.log("related videos effect"),I(!0),(n=null===(t=b.currentSongDetails)||void 0===t?void 0:t.videoId,fetch("".concat("","/api/ytdl/related-videos?videoId=").concat(n),{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}})).then(function(){var e=Object(p.a)(d.a.mark((function e(t){var n,i,o,a,l,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:c=e.sent,j({type:"setRelatedVideos",snippet:c}),j({type:"setNextTrackId",snippet:null===(n=c[0])||void 0===n?void 0:n.videoId}),j({type:"setNextTrack",snippet:{videoId:null===(i=c[0])||void 0===i?void 0:i.videoId,trackTitle:null===(o=c[0])||void 0===o?void 0:o.title,albumArtUrl:null===(a=c[0])||void 0===a?void 0:a.thumbnails.at(-1).url}}),j({type:"setRelatedVideoSourceId",snippet:null===(l=b.currentSongDetails)||void 0===l?void 0:l.videoId}),r(Object(B.a)(c)),I(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):r(b.relatedVideos)}),[null===(t=b.currentSongDetails)||void 0===t?void 0:t.videoId]),Object(h.jsxs)("div",{className:"relatedVideos",children:[Object(h.jsxs)("div",{className:"accordian-header",onClick:function(e){return function(e){e.preventDefault(),v(!u),document.getElementsByClassName("relatedVideosContainer")[0].style.height=u?"50vh":"0vh"}(e)},children:[Object(h.jsx)("p",{style:{width:"200%",fontSize:"18px"},children:Object(h.jsx)("b",{children:"Related Songs"})}),Object(h.jsx)("i",{className:"material-icons",children:u?"keyboard_arrow_up":"keyboard_arrow_down"})]}),Object(h.jsx)("div",{className:"relatedVideosContainer",children:S?Object(h.jsx)(k.a,{}):null===a||void 0===a?void 0:a.map((function(e){return Object(h.jsx)("div",{className:"related-list-item",children:Object(h.jsxs)(w.b,{className:"related-list-item-detail",onClick:function(){E(e)},to:{pathname:"/player1/".concat(null===e||void 0===e?void 0:e.videoId)},children:[Object(h.jsx)("img",{alt:"",src:null===e||void 0===e?void 0:e.thumbnails.at(-1).url}),Object(h.jsx)("div",{children:null===e||void 0===e?void 0:e.title})]})},null===e||void 0===e?void 0:e.videoId)}))})]})};n(78),n(79);function C(){var e=Object(i.useContext)(y),t=Object(c.a)(e,2),n=t[0],o=(t[1],Object(i.useState)(!1)),a=Object(c.a)(o,2),r=a[0],l=a[1],u=n.me;Object(s.f)();function d(){console.log("add to buffer");var e=u.duration;if(u.duration>0)for(var t=0;t<u.buffered.length;t++)u.buffered.start(u.buffered.length-1-t)<u.currentTime&&(document.getElementById("buffered-amount").style.width=u.buffered.end(u.buffered.length-1-t)/e*100+"%",console.log("Buffering =>",(u.buffered.end(u.buffered.length-1-t)/u.duration*100).toFixed(0)+"%"))}function p(){var e=u.duration;e>0&&(document.getElementById("progress-amount").style.width=u.currentTime/e*100+"%",document.getElementById("progress-scrub").style.left=u.currentTime/e*100+"%")}function v(e){console.log("md"),"playing"===n.audioState&&u.pause(),e.preventDefault();var t=e.clientX-document.getElementById("progress-scrub").getBoundingClientRect().left;function i(e){var n=e.clientX-t-document.getElementById("seekBar").getBoundingClientRect().left;n<0&&(n=0);var i=document.getElementById("seekBar").offsetWidth+document.getElementById("progress-scrub").offsetWidth;n>i&&(n=i),document.getElementById("progress-scrub").style.left=n+"px",document.getElementById("progress-amount").style.width=n+"px",console.log(document.getElementById("seekBar").offsetWidth),u.currentTime=n/document.getElementById("seekBar").offsetWidth*u.duration}document.addEventListener("mousemove",i),document.addEventListener("mouseup",(function e(){console.log("mup"),l(!0),"playing"===n.audioState&&u.play();document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",i)}))}return Object(i.useEffect)((function(){return null===u||void 0===u||u.addEventListener("progress",d),d(),null===u||void 0===u||u.addEventListener("timeupdate",p),p(),document.getElementById("seekBar").addEventListener("mouseover",(function(e){document.getElementById("progress-scrub").style.display="block"})),document.getElementById("seekBar").addEventListener("mouseout",(function(e){document.getElementById("progress-scrub").style.display="none"})),function(){null===u||void 0===u||u.removeEventListener("progress",d),null===u||void 0===u||u.removeEventListener("timeupdate",p)}}),[]),Object(h.jsxs)("div",{id:"seekBar",className:"seekBar",onClick:function(e){if(e.preventDefault(),r)l(!1);else{console.log("click"),u.pause(),console.log(document.getElementById("progress-scrub").offsetWidth);var t=e.clientX-document.getElementById("seekBar").getBoundingClientRect().left;t<0&&(t=0);var i=document.getElementById("seekBar").offsetWidth+document.getElementById("progress-scrub").offsetWidth;t>i&&(t=i),document.getElementById("progress-scrub").style.left=t+"px",document.getElementById("progress-amount").style.width=t+"px",console.log(u.duration),console.log(t/document.getElementById("seekBar").clientWidth*u.duration),u.currentTime=t/document.getElementById("seekBar").clientWidth*u.duration,"playing"===n.audioState&&u.play()}},children:[Object(h.jsx)("span",{id:"buffered-amount"}),Object(h.jsx)("div",{id:"progress-amount"}),Object(h.jsx)("div",{onDragStart:function(){return!1},onTouchStart:v,onMouseDown:v,id:"progress-scrub"})]})}var N=n(105);n(80);var T=function(){var e,t,n=Object(s.h)().videoId,o=Object(s.f)(),a=Object(i.useContext)(y),r=Object(c.a)(a,2),l=r[0],u=r[1],d=l.me,p=Object(i.useState)(!1),v=Object(c.a)(p,2),f=v[0],m=v[1],b=Object(i.useState)(0),j=Object(c.a)(b,2),O=j[0],x=j[1],S=Object(i.useState)(0),I=Object(c.a)(S,2),w=I[0],B=I[1];function E(){x(d.duration),d.duration>0&&B(d.currentTime),m(!1),u({type:"setAudioState",snippet:"playing"})}function T(){console.log("add to buffer");d.duration;if(d.duration>0)for(var e=0;e<d.buffered.length;e++)d.buffered.start(d.buffered.length-1-e)<d.currentTime&&console.log("Buffering =>",(d.buffered.end(d.buffered.length-1-e)/d.duration*100).toFixed(0)+"%")}function A(){var e=d.duration;x(d.duration),e>0&&B(d.currentTime)}function D(e){var t;switch(console.log(e),console.log(l.currentSongDetails),e){case"prev":u({type:"setBufferState",snippet:"loading"}),u({type:"setCurrentSong",snippet:l.currentSongDetails}),null!=document.getElementById("buffered-amount")&&(document.getElementById("buffered-amount").style.width="0%"),null!=document.getElementById("progress-amount")&&(document.getElementById("progress-amount").style.width="0px"),null!=document.getElementById("progress-scrub")&&(document.getElementById("progress-scrub").style.left="0px"),l.me.removeAttribute("src"),l.me.load(),g.setAudioUrl(null===l||void 0===l||null===(t=l.currentSongDetails)||void 0===t?void 0:t.videoId,l).then((function(){console.log("track loaded"),u({type:"setBufferState",snippet:"loaded"})}));break;case"next":u({type:"setAudioState",snippet:"paused"}),u({type:"setBufferState",snippet:"loading"}),g.getVideoInfo(null===l||void 0===l?void 0:l.nextTrackId).then((function(e){var t,n,i,o;console.log(null===e||void 0===e||null===(t=e.thumbnails[(null===e||void 0===e||null===(n=e.thumbnails)||void 0===n?void 0:n.length)-1])||void 0===t?void 0:t.url),u({type:"setCurrentSong",snippet:{videoId:null===l||void 0===l?void 0:l.nextTrackId,trackTitle:null===e||void 0===e?void 0:e.title,albumArtUrl:null===e||void 0===e||null===(i=e.thumbnails[(null===e||void 0===e||null===(o=e.thumbnails)||void 0===o?void 0:o.length)-1])||void 0===i?void 0:i.url}}),g.setAudioUrl(null===l||void 0===l?void 0:l.nextTrackId,l).then((function(){fetch(l.me.src).then((function(){u({type:"setBufferState",snippet:"loaded"}),l.me.play(),u({type:"setAudioState",snippet:"playing"})})).catch((function(e){u({type:"setBufferState",snippet:"loaded"}),u({type:"setAudioState",snippet:"error"})}))}))}))}}return Object(i.useEffect)((function(){window.onpopstate=function(){o.push("/")}})),Object(i.useEffect)((function(){return console.log("use effect"),console.log(n),console.log(console.log(l.currentSongDetails)),console.log(Object.keys(l.currentSongDetails).length),0==Object.keys(l.currentSongDetails).length&&(u({type:"setBufferState",snippet:"loading"}),g.getVideoInfo(n).then((function(e){var t,i,o,a;console.log(null===e||void 0===e||null===(t=e.thumbnails[(null===e||void 0===e||null===(i=e.thumbnails)||void 0===i?void 0:i.length)-1])||void 0===t?void 0:t.url),u({type:"setCurrentSong",snippet:{videoId:n,trackTitle:null===e||void 0===e?void 0:e.title,albumArtUrl:null===e||void 0===e||null===(o=e.thumbnails[(null===e||void 0===e||null===(a=e.thumbnails)||void 0===a?void 0:a.length)-1])||void 0===o?void 0:o.url}}),g.setAudioUrl(n,l).then((function(){fetch(l.me.src).then((function(){u({type:"setBufferState",snippet:"loaded"}),l.me.play()})).catch((function(e){u({type:"setBufferState",snippet:"loaded"})}))}))}))),null===d||void 0===d||d.addEventListener("loadedmetadata",E),null===d||void 0===d||d.addEventListener("progress",T),null===d||void 0===d||d.addEventListener("timeupdate",A),"mediaSession"in navigator&&(console.log("media session works"),navigator.mediaSession.metadata=new window.MediaMetadata({title:l.currentSongDetails.trackTitle,artwork:[{src:null==l.currentSongDetails.albumArtUrl?"":l.currentSongDetails.albumArtUrl,sizes:"512x512",type:"image/png"}]}),navigator.mediaSession.setActionHandler("play",(function(){u({type:"setAudioState",snippet:"playing"})})),navigator.mediaSession.setActionHandler("pause",(function(){u({type:"setAudioState",snippet:"paused"})}))),B(null===d||void 0===d?void 0:d.currentTime),x(null===d||void 0===d?void 0:d.duration),u({type:"setPlayerState",snippet:"max"}),function(){null===d||void 0===d||d.removeEventListener("progress",T),null===d||void 0===d||d.removeEventListener("timeupdate",A),u({type:"setPlayerState",snippet:"min"})}}),[l.currentSongDetails]),Object(h.jsx)("div",{className:"playerContainer",children:Object(h.jsxs)("div",{className:"Player",children:[Object(h.jsx)("div",{className:"AlbumArt",children:Object(h.jsx)("img",{src:null===l||void 0===l||null===(e=l.currentSongDetails)||void 0===e?void 0:e.albumArtUrl})}),Object(h.jsx)("div",{className:"scroll-container",children:Object(h.jsx)("div",{id:"scroll-text",children:null===l||void 0===l||null===(t=l.currentSongDetails)||void 0===t?void 0:t.trackTitle})}),Object(h.jsx)(C,{}),Object(h.jsxs)("div",{id:"timeLine",children:[Object(h.jsx)("div",{children:f?"0:00":parseInt(w/60%60).toString()+":"+parseInt(w%60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})}),Object(h.jsx)("div",{children:f?"0:00":parseInt(O/60%60).toString()+":"+parseInt(O%60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})})]}),Object(h.jsx)("div",{className:"player-controls",children:"loading"===l.bufferState?Object(h.jsx)("div",{children:Object(h.jsx)(k.a,{})}):Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"},children:[Object(h.jsx)("button",{onClick:function(){D("prev")},children:Object(h.jsx)("span",{id:"playbtn",className:"material-icons",children:"skip_previous"})}),Object(h.jsx)(N.a,{style:{border:"solid",backgroundColor:"salmon"},onClick:function(e){switch(e.preventDefault(),console.log(l.audioState),l.audioState){case"playing":u({type:"setAudioState",snippet:"paused"});break;case"paused":u({type:"setAudioState",snippet:"playing"});break;case"error":u({type:"setAudioState",snippet:"error"})}},children:Object(h.jsx)("span",{id:"playbtn",className:"material-icons",children:function(){switch(l.audioState){case"paused":return"play_arrow";case"playing":return"pause";case"error":return"music_off";default:return"play_arrow"}}()})}),Object(h.jsx)("button",{onClick:function(){D("next")},children:Object(h.jsx)("span",{id:"playbtn",className:"material-icons",children:"skip_next"})})]})})]})})};var A=function(e){var t=Object(i.useContext)(y),n=Object(c.a)(t,2),o=(n[0],n[1]),a=Object(s.f)();function r(e){g.setPlayerApperance(e,"min"),o({type:"setPlayerState",snippet:"min"}),setTimeout((function(){return a.push("/")}),150)}return Object(i.useEffect)((function(){return function(){}})),Object(h.jsxs)("div",{className:"PlayerPage",children:[Object(h.jsx)("button",{style:{float:"left"},children:Object(h.jsx)(w.b,{onClick:function(e){r(e)},style:{textDecoration:"none"},to:"/",className:"material-icons",children:"keyboard_arrow_down"})}),Object(h.jsx)(T,{props:e}),Object(h.jsx)(E,{props:e})]})},D=(n(81),n(52)),P=n.n(D);var U=function(){var e=Object(i.useState)(),t=Object(c.a)(e,2),n=t[0],o=t[1],a=Object(i.useState)(),r=Object(c.a)(a,2),l=(r[0],r[1]),u=Object(i.useState)(!1),v=Object(c.a)(u,2),f=v[0],m=v[1],b=Object(i.useState)(""),j=Object(c.a)(b,2),O=j[0],x=j[1],S=Object(i.useContext)(y),I=Object(c.a)(S,2),E=I[0],C=I[1],N=Object(s.f)();Object(i.useEffect)((function(){var e;return console.log("mount search"),console.log(E.searchKey),(null===E||void 0===E||null===(e=E.searchResult)||void 0===e?void 0:e.length)>0&&void 0!==(null===E||void 0===E?void 0:E.searchResult)|null&&o(E.searchResult),x(E.searchKey),function(){console.log("unmount search"),console.log(n),console.log(O),C({type:"setSearchKeyValue",snippet:O}),C({type:"setSearchResult",snippet:n})}}),[null===E||void 0===E?void 0:E.searchKey]);var T=Object(i.useCallback)(P.a.debounce((function(e){var t,n,i,a;x(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value),m(!0),console.log(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value),l(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value),fetch("".concat("","/api/ytdl/search"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({searchKey:null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value})}).then(function(){var e=Object(p.a)(d.a.mark((function e(t){var n,i,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:a=e.sent,console.log(null===(n=a[0])||void 0===n||null===(i=n.id)||void 0===i?void 0:i.videoId),o(Object(B.a)(a)),m(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),400),[]);return Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:"Search"}),Object(h.jsx)("input",{type:"text",placeholder:"Type Song Name, Lyrics, Movie/Album/Singer Name",onChange:T}),Object(h.jsx)("div",{className:"search-result-container",children:f?Object(h.jsx)("div",{style:{paddingTop:"50%"},children:Object(h.jsx)(k.a,{})}):null===n||void 0===n?void 0:n.map((function(e){var t,n,i,o,a;return Object(h.jsx)("div",{className:"list-item",children:Object(h.jsxs)(w.b,{className:"list-item-link",onClick:function(t){!function(e,t){D.apply(this,arguments)}(t,e)},to:"/player1/".concat(null===e||void 0===e||null===(n=e.id)||void 0===n?void 0:n.videoId),children:[Object(h.jsx)("img",{alt:"",src:null===e||void 0===e||null===(i=e.snippet)||void 0===i||null===(o=i.thumbnails)||void 0===o||null===(a=o.default)||void 0===a?void 0:a.url}),Object(h.jsx)("div",{children:null===e||void 0===e?void 0:e.title})]},null===e||void 0===e||null===(t=e.id)||void 0===t?void 0:t.videoId)})}))})]});function A(e){null==E.playerState|void 0?(C({type:"setPlayerState",snippet:"max"}),C({type:"setSearchResult",snippet:n}),setTimeout((function(){var t;return N.push("/player1/".concat(null===e||void 0===e||null===(t=e.id)||void 0===t?void 0:t.videoId))}),150)):"min"===E.playerState?(C({type:"setSearchResult",snippet:n}),C({type:"setPlayerState",snippet:"min"})):"max"===E.playerState&&(C({type:"setPlayerState",snippet:"max"}),C({type:"setSearchResult",snippet:n}),setTimeout((function(){var t;return N.push("/player1/".concat(null===e||void 0===e||null===(t=e.id)||void 0===t?void 0:t.videoId))}),150))}function D(){return(D=Object(p.a)(d.a.mark((function e(t,n){var i,o,a,r,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),E.me.removeAttribute("src"),E.me.load(),C({type:"setBufferState",snippet:"loading"}),C({type:"setCurrentSong",snippet:{videoId:null===n||void 0===n||null===(i=n.id)||void 0===i?void 0:i.videoId,trackTitle:null===n||void 0===n?void 0:n.title,albumArtUrl:null===n||void 0===n||null===(o=n.snippet)||void 0===o||null===(a=o.thumbnails)||void 0===a||null===(r=a.default)||void 0===r?void 0:r.url}}),U(null===n||void 0===n||null===(l=n.id)||void 0===l?void 0:l.videoId).then((function(){console.log("track loaded"),C({type:"setBufferState",snippet:"loaded"})})),A(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return L.apply(this,arguments)}function L(){return(L=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.setAudioUrl(t,E);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},L=(n(83),n(84),n(106)),R=n(107),V=n(108),_=n(109);var M=function(e){var t=e.items,n=e.handleClick,o=Object(i.useState)(),a=Object(c.a)(o,2),r=a[0],l=a[1],s=Object(i.useContext)(y),u=Object(c.a)(s,2);return u[0],u[1],Object(i.useEffect)((function(){console.log("card slider effect"),l(t)}),[t]),Object(h.jsx)("div",{className:"silderContainer",children:null===r||void 0===r?void 0:r.map((function(e){return Object(h.jsx)(L.a,{style:{display:"inline-block",whiteSpace:"pre-line",width:"50%",height:"30vh",margin:"2.5%"},children:Object(h.jsxs)(R.a,{onClick:function(t){n(t,{videoId:null===e||void 0===e?void 0:e.videoId,title:null===e||void 0===e?void 0:e.title,imageUrl:null===e||void 0===e?void 0:e.imageUrl})},children:[Object(h.jsx)(V.a,{component:"img",height:"140",image:null===e||void 0===e?void 0:e.imageUrl,alt:"album art",style:{objectFit:"fill"}}),Object(h.jsx)(_.a,{children:null===e||void 0===e?void 0:e.title})]})},null===e||void 0===e?void 0:e.videoId)}))})},W=n(110),J=n(112);var K=[{key:"home",component:function(e){var t=Object(i.useContext)(y),n=Object(c.a)(t,2),o=n[0],a=n[1],r=Object(s.f)(),l=Object(i.useState)(),u=Object(c.a)(l,2),v=u[0],f=u[1],m=Object(i.useState)(),b=Object(c.a)(m,2),j=b[0],O=b[1];Object(i.useEffect)((function(){console.log("home page effect"),null==(null===o||void 0===o?void 0:o.trendingSongs)&&null==(null===o||void 0===o?void 0:o.pickedSongs)?(S("trending songs").then(function(){var e=Object(p.a)(d.a.mark((function e(t){var n,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,i=n.filter((function(e){return x(null===e||void 0===e?void 0:e.duration_raw)<=600})).map((function(e){var t,n,i,o;return{imageUrl:null===e||void 0===e||null===(t=e.snippet)||void 0===t||null===(n=t.thumbnails)||void 0===n||null===(i=n.high)||void 0===i?void 0:i.url,title:null===e||void 0===e?void 0:e.title,videoId:null===e||void 0===e||null===(o=e.id)||void 0===o?void 0:o.videoId}})),f(i),a({type:"setTrendingSongs",snippet:i});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S("malayalam trending songs").then(function(){var e=Object(p.a)(d.a.mark((function e(t){var n,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,i=n.filter((function(e){return x(null===e||void 0===e?void 0:e.duration_raw)<=600})).map((function(e){var t,n,i,o;return{imageUrl:null===e||void 0===e||null===(t=e.snippet)||void 0===t||null===(n=t.thumbnails)||void 0===n||null===(i=n.high)||void 0===i?void 0:i.url,title:null===e||void 0===e?void 0:e.title,videoId:null===e||void 0===e||null===(o=e.id)||void 0===o?void 0:o.videoId}})),O(i),a({type:"setPickedSongs",snippet:i});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):(f(o.trendingSongs),O(o.pickedSongs))}),[]);var x=function(e){var t=null===e||void 0===e?void 0:e.split(":"),n=0;switch(null===t||void 0===t?void 0:t.length){case 3:n=60*parseInt(t[0],10)*60+60*parseInt(t[1],10)+parseInt(t[2],10);break;case 2:n=60*parseInt(t[0],10)+parseInt(t[1],10);break;case 1:n=parseInt(t[1],10)}return n};function S(e){return fetch("".concat("","/api/ytdl/search"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({searchKey:e})})}function k(e,t){e.preventDefault(),o.me.removeAttribute("src"),o.me.load(),a({type:"setBufferState",snippet:"loading"}),a({type:"setCurrentSong",snippet:{videoId:null===t||void 0===t?void 0:t.videoId,trackTitle:null===t||void 0===t?void 0:t.title,albumArtUrl:null===t||void 0===t?void 0:t.imageUrl}}),function(e){return I.apply(this,arguments)}(null===t||void 0===t?void 0:t.videoId).then((function(){console.log("track loaded"),a({type:"setBufferState",snippet:"loaded"})})),function(e){null==o.playerState|void 0?(a({type:"setPlayerState",snippet:"max"}),setTimeout((function(){return r.push("/player1/".concat(null===e||void 0===e?void 0:e.videoId))}),150)):"min"===o.playerState?a({type:"setPlayerState",snippet:"min"}):"max"===o.playerState&&(a({type:"setPlayerState",snippet:"max"}),setTimeout((function(){return r.push("/player1/".concat(null===e||void 0===e?void 0:e.videoId))}),150))}(t)}function I(){return(I=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.setAudioUrl(t,o);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e){var t=e.cardNumber;return Object(h.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly"},children:Array.from({length:t},(function(e,t){return Object(h.jsxs)(J.a,{sx:{pt:.5},style:{width:"100%",height:"30vh",margin:"2.5%"},children:[Object(h.jsx)(W.a,{variant:"rect",style:{width:"100%",height:"20vh"}}),Object(h.jsx)(W.a,{}),Object(h.jsx)(W.a,{})]},t)}))})};return Object(h.jsxs)("div",{className:"HomePage",children:[Object(h.jsx)("h3",{children:"Welcome Back!"}),Object(h.jsx)("h3",{style:{textAlign:"left"},children:"Trending Songs"}),null==v|void 0?Object(h.jsx)(w,{cardNumber:2}):Object(h.jsx)(M,{items:v,handleClick:k}),Object(h.jsx)("h3",{style:{textAlign:"left"},children:"Picked for you"}),null==j|void 0?Object(h.jsx)(w,{cardNumber:2}):Object(h.jsx)(M,{items:j,handleClick:k})]})},path:"/"},{key:"search",component:U,path:"/search"},{key:"player",component:A,path:"/player1/:videoId"}];n(85);function F(){var e,t;return Object(h.jsx)("div",{className:"footerContainer",children:Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{className:"link-items",children:Object(h.jsxs)(w.b,{className:"link-items",to:null===(e=K.find((function(e){return"home"==e.key})))||void 0===e?void 0:e.path,children:[Object(h.jsx)("span",{className:"material-icons icon",children:"home"}),Object(h.jsx)("span",{className:"link-text",children:"Home"})]})}),Object(h.jsx)("li",{className:"link-items",children:Object(h.jsxs)(w.b,{className:"link-items",to:null===(t=K.find((function(e){return"search"==e.key})))||void 0===t?void 0:t.path,children:[Object(h.jsx)("span",{className:"material-icons icon",children:"search"}),Object(h.jsx)("span",{className:"link-text",children:"Search"})]})}),Object(h.jsxs)("li",{className:"link-items",children:[Object(h.jsx)("span",{className:"material-icons icon",children:"download"}),Object(h.jsx)("span",{className:"link-text",children:"Downloads"})]})]})})}n(86);var z=n(113);var H=function(){var e=Object(i.useContext)(y),t=Object(c.a)(e,2),n=t[0],o=(t[1],Object(i.useState)(!0)),a=Object(c.a)(o,2),r=a[0],u=a[1],d=Object(s.g)();return Object(i.useEffect)((function(){return console.log(JSON.parse(window.localStorage.getItem("store"))),console.log("Environment ->","production"),console.log("Api base url ->",""),window.addEventListener("online",(function(){u(navigator.onLine)})),window.addEventListener("offline",(function(){u(navigator.onLine)})),function(){console.log("unmount"),window.removeEventListener("online",(function(){u(navigator.onLine)})),window.removeEventListener("offline",(function(){u(navigator.onLine)})),window.localStorage.setItem("store",JSON.stringify(n))}}),[]),Object(h.jsxs)("div",{className:"appContainer",children:[Object(h.jsx)("div",{className:"appBody",children:Object(h.jsx)(s.c,{children:K.map((function(e){return Object(h.jsx)(s.a,Object(l.a)({exact:!0},e))}))})}),Object(h.jsxs)("div",{className:"bottomContainer",children:["min"===n.playerState?Object(h.jsx)(I,{}):null,d.pathname.includes("player1")?null:Object(h.jsx)(F,{})]}),Object(h.jsx)(z.a,{style:{zIndex:1e4},anchorOrigin:{vertical:"bottom",horizontal:"right"},message:"No internet Connection",autoHideDuration:5e3,open:!r})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,116)).then((function(t){var n=t.getCLS,i=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),i(e),o(e),a(e),r(e)}))};r.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(S,{children:Object(h.jsx)(w.a,{children:Object(h.jsx)(H,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),X()}},[[87,1,2]]]);
//# sourceMappingURL=main.8b5074a2.chunk.js.map