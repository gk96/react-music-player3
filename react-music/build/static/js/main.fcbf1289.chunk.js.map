{"version":3,"sources":["services/PlayerService.js","context/AppContext.js","components/MiniPlayer/MiniPlayer.js","components/RelatedVideos/RelatedVideos.js","components/SeekBar/SeekBar.js","components/Player2/Player2.js","pages/PlayerPage/PlayerPage.js","pages/SearchPage/SearchPage.js","components/CardSlider/CardSlider.js","pages/HomePage/HomePage.js","Routes.js","components/Footer/Footer.js","App.js","serviceWorkerRegistration.js","reportWebVitals.js","index.js"],"names":["videoId","context","a","url","process","encodeURIComponent","audio","Audio","me","src","crossOrigin","muted","console","log","fetch","method","headers","body","JSON","stringify","then","res","text","audioUrl","getVideoInfo","response","json","URL","createObjectURL","mediaSource","videoUrl","reader","getReader","chunks","sourceBuffer","addSourceBuffer","getMIMEType","ext","acodec","mode","result","done","read","push","value","buffer","length","updating","sourceBuffers","appendBuffer","shift","e","addEventListener","readyState","undefined","endOfStream","PlayerService","setPlayButton","audioState","pause","play","catch","error","extension","codecs","setSource","setAudioSource","setAudioUrl","setPlayerApperance","playerState","preventDefault","document","getElementsByClassName","style","height","transform","setNotificationLabel","currentSongDetails","navigator","mediaSession","metadata","window","MediaMetadata","title","trackTitle","artwork","albumArtUrl","sizes","type","AppContext","React","createContext","store","createElement","MediaSource","searchResult","relatedVideos","menuOpen","snackbarMsg","themeSelectValue","testProp","bufferState","relatedVideoSourceId","searchKey","previousTrack","nextTrack","nextTrackId","trendingSongs","pickedSongs","reducer","state","action","snippet","ContextWrapper","props","globalStore","useReducer","Provider","children","MiniPlayer","useContext","dispatch","history","useHistory","openPlayer","setTimeout","useEffect","className","onClick","class","alt","id","CircularProgress","stopPropagation","playAudio","RelatedVideos","useState","setRelatedVideos","toggleAccordian","setToggleAccordian","loading","setLoading","trackChange","r","removeSourceBuffer","thumbnails","at","getElementById","width","left","removeAttribute","load","videos","openRelatedVideos","fontSize","map","to","pathname","SeekBar","mousedownFired","setMouseDownFired","progress","duration","i","buffered","start","currentTime","end","toFixed","timeupdate","onMouseDown","shiftX","clientX","getBoundingClientRect","onMouseMove","event","newLeft","rightEdge","offsetWidth","onMouseUp","removeEventListener","display","clientWidth","onDragStart","onTouchStart","Player2","useParams","songDuration","setSongDuration","seekbarDuration","setSeekbarDuration","loadedmetadata","changeTrack","trackSelect","err","onpopstate","Object","keys","parseInt","toString","toLocaleString","minimumIntegerDigits","useGrouping","IconButton","PlayerPage","setPlayerState","float","textDecoration","SearchPage","searchItems","setSearchItems","setInput","searchLoader","setSearchLoader","setSearchKey","debouncedChangeHandler","useCallback","_","debounce","target","placeholder","onChange","paddingTop","selectSong","default","CardSlider","items","handleClick","cardItems","setCardItems","item","Card","CardActionArea","imageUrl","CardMedia","component","image","objectFit","CardContent","HomePage","routes","key","trendingItems","setTrendingItems","pickedItems","setPickedItems","getSearchResult","filteredResponse","filter","convertDurationToNumber","duration_raw","val","high","arr","split","seconds","CardSkeleton","cardNumber","flexDirection","justifyContent","Array","from","Box","sx","pt","margin","Skeleton","variant","path","Footer","find","x","App","networkStatus","setNetworkStatus","location","useLocation","parse","localStorage","getItem","onLine","setItem","exact","includes","Snackbar","anchorOrigin","vertical","horizontal","message","autoHideDuration","open","Boolean","hostname","match","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","serviceWorker","ready","registration","unregister"],"mappings":"whBAmFA,WAA8BA,EAASC,GAAvC,iBAAAC,EAAA,sDACOC,EADP,UACgBC,GADhB,0DACoGC,mBAAmB,mCAAD,OAAoCL,KAOpJM,EAAQ,IAAIC,MAAMJ,GACtBF,EAAQO,GAAGC,IAAMN,EACjBG,EAAMI,YAAc,YACpBT,EAAQO,GAAGG,OAAQ,EAGnBC,QAAQC,IAAIP,GAdd,4C,kEAoBA,WAA2BN,EAASC,GAApC,SAAAC,EAAA,sEAaSY,MAAM,GAAD,OAAIV,GAAJ,yDAAuFJ,GAAW,CAC5Ge,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBnB,QAASA,MAGZoB,MAAK,SAAAC,GACJ,OAAOA,EAAIC,OAAOF,MAAK,SAAAG,GACnBX,QAAQC,IAAIU,GACZtB,EAAQO,GAAGC,IAAMc,QAzBzB,4C,+BAyDeC,E,8EAAf,WAA4BxB,GAA5B,eAAAE,EAAA,sEAEuBY,MAAM,GAAD,OAAIV,GAAJ,0BAAgE,CAExFW,OAAQ,OACRC,QAAS,CACP,OAAU,mBACV,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CAEnBnB,QAASA,MAXf,cAEMyB,EAFN,gBAeeA,EAASC,OAfxB,oF,kEA0BA,WAA4B1B,EAASC,GAArC,sBAAAC,EAAA,6DACED,EAAQO,GAAGC,IAAMkB,IAAIC,gBAAJ,OAAoB3B,QAApB,IAAoBA,OAApB,EAAoBA,EAAS4B,aADhD,SAEkBL,EAAaxB,GAF/B,OAEMqB,EAFN,OAGET,QAAQC,IAAIQ,GAGZP,MAAM,GAAD,OAAIV,GAAJ,yCAA+E,CAEpFW,OAAQ,OACRC,QAAS,CACP,OAAU,mBACV,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CAEnBW,SAAU,mCAAqC9B,MAGlDoB,KAZC,uCAYI,WAAOK,GAAP,+BAAAvB,EAAA,sDACA6B,EAASN,EAASR,KAAKe,YACvBC,EAAS,IACTC,EAAejC,EAAQ4B,YAAYM,gBAAgB,EAAKC,YAAYf,EAAIgB,IAAKhB,EAAIiB,UAGxEC,KAAO,WANhB,oBAQGC,SARH,aAQG,EAAQC,KARX,iCAUaV,EAAOW,OAVpB,OAcF,GAJAF,EAVE,OAaFP,EAAOU,KAAP,UAAYH,SAAZ,iBAAY,EAAQI,aAApB,aAAY,EAAeC,QACP,MAAhBX,GAAsCD,EAAOa,OAAS,IAAMZ,EAAaa,UAA0B,MAAbd,EAAO,IAE9C,OAAzC,UAAAhC,EAAQ4B,mBAAR,eAAqBmB,cAAc,IACnC,IACgB,OAAZd,QAAY,IAAZA,KAAce,aAAahB,EAAOiB,SAEtC,MAAMC,IApBd,eAiCEX,SAjCF,aAiCE,EAAQC,MAjCV,wBAmCA7B,QAAQC,IAAI,yBACZqB,EAAakB,iBAAiB,aAAa,WACpClB,EAAaa,UAA+C,SAAnC9C,EAAQ4B,YAAYwB,aAC7CpB,EAAOa,OAAS,IAAMZ,EAAaa,UAA0B,MAAbd,EAAO,IACxDrB,QAAQC,IAAI,sBAAuBoB,EAAOa,QAC1ClC,QAAQC,IAAIoB,GACZrB,QAAQC,IAAIqB,EAAaa,eACJO,IAAjBpB,GACJA,EAAae,aAAahB,EAAOiB,UAGZ,MAAhBhB,IAAuC,MAAbD,EAAO,IAA4BA,EAAOa,QAAS,KAAOZ,EAAaa,WACxGnC,QAAQC,IAAI,cACZZ,EAAQ4B,YAAY0B,mBAhDxB,6EAuDGtB,GAvDH,4CAZJ,uDANF,4C,sBAmFeuB,MA5QO,CACpBC,cAUF,SAAuBjD,EAAIkD,GACzB,OAAOA,GACH,IAAK,SACHlD,EAAGmD,QACH,MACF,IAAK,UACHnD,EAAGoD,OACFxC,MAAK,eAEHyC,OAAM,SAACC,SAlBhBtC,aAAcA,EACdY,YA8KF,SAAqB2B,EAAWC,GAC9B,OAAOD,GACL,IAAK,OAAS,MAAM,SAAN,OAAgBA,EAAhB,mBAAoCC,GAClD,IAAK,MAAQ,MAAM,oBAAN,OAA2BA,GACxC,QAAU,MAAM,2BAjLlBC,U,8CACAC,e,8CACAC,Y,8CACAC,mBAyCF,SAA4BjB,EAAGkB,GAC7B,OAAOA,GACL,IAAK,MACHlB,EAAEmB,iBACFC,SAASC,uBAAuB,eAAe,GAAGC,MAAMC,OAAS,aACjEH,SAASC,uBAAuB,eAAe,GAAGC,MAAME,UAAY,0BACpE,MACF,IAAK,MACHxB,EAAEmB,iBACFC,SAASC,uBAAuB,mBAAmB,GAAGC,MAAME,UAAY,2BAjD5EC,qBAwDF,SAA8BC,GACxB,iBAAkBC,YACpBlE,QAAQC,IAAI,uBACdiE,UAAUC,aAAaC,SAAW,IAAIC,OAAOC,cAAc,CACzDC,MAAON,EAAmBO,WAC1BC,QAAS,CACP,CACE5E,IAAuC,MAAlCoE,EAAmBS,YAAmC,GAAKT,EAAmBS,YACnFC,MAAO,UACPC,KAAM,mB,OCvEDC,EAAaC,IAAMC,cAAc,MAE1CC,EAAQ,CACRpF,GAAI+D,SAASsB,cAAc,SAC3BhE,YAAa,IAAIiE,YACjB5D,aAAc,KACd6D,aAAc,KACdC,cAAe,KACfC,UAAU,EACVC,aAAa,EACbC,iBAAkB,UAClBtB,mBAAoB,GACpBuB,SAAU,GACV1C,WAAY,SACZ2C,YAAa,UACbhC,YAAa,KACbiC,qBAAsB,GACtBC,UAAW,GACXC,cAAe,GACfC,UAAU,GACVC,YAAa,GACbC,cAAe,KACfC,YAAa,MAGXC,EAAU,SAACC,EAAOC,GACpB,OAAQA,EAAOvB,MACX,IAAK,iBACD,kCACOsB,GADP,IAEIjC,mBAAoBkC,EAAOC,UAGnC,IAAK,mBACD,OAAO,2BACAF,GADP,IAEId,cAAee,EAAOC,UAG9B,IAAK,sBACD,OAAO,2BACAF,GADP,IAEIX,iBAAkBY,EAAOC,UAEjC,IAAK,gBAED,OADAxD,EAAcC,cAAcmC,EAAMpF,GAAIuG,EAAOC,SACtC,2BACAF,GADP,IAEIpD,WAAYqD,EAAOC,UAE3B,IAAK,iBACD,OAAO,2BACAF,GADP,IAEIT,YAAaU,EAAOC,UAE5B,IAAK,iBACD,OAAO,2BACAF,GADP,IAEIzC,YAAa0C,EAAOC,UAG5B,IAAK,0BACD,OAAO,2BACAF,GADP,IAEIR,qBAAsBS,EAAOC,UAErC,IAAK,oBACD,OAAO,2BACAF,GADP,IAEIP,UAAWQ,EAAOC,UAE1B,IAAK,kBACD,kCACOF,GADP,IAEIf,aAAcgB,EAAOC,UAE7B,IAAK,cACD,kCACOF,GADP,IAEIL,UAAWM,EAAOC,UAE1B,IAAK,kBACD,kCACOF,GADP,IAEIN,cAAeO,EAAOC,UAE9B,IAAK,iBACD,OAAO,2BACAF,GADP,IAEIJ,YAAaK,EAAOC,UAE5B,IAAK,mBACD,OAAO,2BACAF,GADP,IAEIH,cAAeI,EAAOC,UAE9B,IAAK,iBACD,OAAO,2BACAF,GADP,IAEIF,YAAaG,EAAOC,UAI5B,IAAK,WACD,OAAOD,EAAOC,QAElB,QACI,OAAOF,IAING,EAAiB,SAACC,GAW3B,IAAMC,EAAcC,qBAAWP,EAASjB,GAE3C,OACC,cAACH,EAAW4B,SAAZ,CAAqBzE,MAAQuE,EAA7B,SACED,EAAMI,Y,iBCzHK,SAASC,IAAc,IAAD,IAGjC,EAA4BC,qBAAW/B,GAAvC,mBAAOxF,EAAP,KAAgBwH,EAAhB,KACMC,EAAUC,cAiChB,SAASC,EAAWzE,GAAG,IAAD,MAClBA,EAAEmB,iBAIFmD,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,CACvChH,QAAO,OAAEC,QAAF,IAAEA,GAAF,UAAEA,EAAS4E,0BAAX,aAAE,EAA6B7E,QACtCoF,WAAU,OAAEnF,QAAF,IAAEA,GAAF,UAAEA,EAAS4E,0BAAX,aAAE,EAA6BO,WACzCE,YAAW,OAAErF,QAAF,IAAEA,GAAF,UAAEA,EAAS4E,0BAAX,aAAE,EAA6BS,eAhBlD,SAA4BnC,GACxBK,EAAcY,mBAAmBjB,EAAG,OACpC0E,YAAW,WAAO,IAAD,EACbJ,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,QAC3CU,EAAQ/E,KAAR,0BAAyB1C,QAAzB,IAAyBA,GAAzB,UAAyBA,EAAS4E,0BAAlC,aAAyB,EAA6B7E,YACpD,KAcNoE,CAAmBjB,GAgBvB,OA1DA2E,qBAAU,cAEP,CAAC7H,EAAQ4E,qBAyDR,sBAAKkD,UAAU,cAAcC,QAAS,SAAC7E,GAAOyE,EAAWzE,IAAzD,UAEQ,qBAAK8E,MAAM,sBAAX,SACI,qBAAKxH,IAAG,OAAER,QAAF,IAAEA,GAAF,UAAEA,EAAS4E,0BAAX,aAAE,EAA6BS,YAAa4C,IAAI,gBAQ5D,qBAAKC,GAAG,mBAAR,SACI,qBAAKA,GAAG,cAAR,gBAAuBlI,QAAvB,IAAuBA,GAAvB,UAAuBA,EAAS4E,0BAAhC,aAAuB,EAA6BO,eAiB/B,YAAxBnF,EAAQoG,YACT,8BAAK,cAAC+B,EAAA,EAAD,MACL,qBAAK3D,MAAO,CAAC,QAAW,OAAQ,eAAkB,SAAU,cAAiB,UAA7E,SACA,wBAAQuD,QAAS,SAAC7E,IAvF9B,SAAmBA,GACfA,EAAEkF,kBACyB,YAAvBpI,EAAQyD,YAEPzD,EAAQO,GAAGmD,QAEX8D,EAAS,CAACjC,KAAM,gBAAiBwB,QAAS,YAEb,WAAvB/G,EAAQyD,YAEdzD,EAAQO,GAAGoD,OAEX6D,EAAS,CAACjC,KAAM,gBAAiBwB,QAAS,aAEb,UAAvB/G,EAAQyD,YACf+D,EAAS,CAACjC,KAAM,gBAAiBwB,QAAS,UAwEbsB,CAAUnF,IAAnC,SACI,sBAAM4E,UAAU,iBAAhB,SA/ChB,WACI,OAAO9H,EAAQyD,YACb,IAAK,SACH,MAAO,aACT,IAAK,UACH,MAAO,QACT,IAAK,QACH,MAAO,YACT,QACE,MAAO,cAsCmCD,Y,kCCmDvC8E,MArJf,SAAuBrB,GAAO,IAAD,EAEzB,EAA0CsB,qBAA1C,mBAAOxC,EAAP,KAAsByC,EAAtB,KACA,EAA8CD,oBAAS,GAAvD,mBAAOE,EAAP,KAAwBC,EAAxB,KACA,EAA4BnB,qBAAW/B,GAAvC,mBAAOxF,EAAP,KAAgBwH,EAAhB,KACA,EAA8Be,oBAAS,GAAvC,mBAAOI,EAAP,KAAgBC,EAAhB,KAwCA,SAASC,EAAYC,GAAG,IAAD,EACnBnI,QAAQC,IAAI,wBAGdD,QAAQC,IAAR,UAAYZ,EAAQ4B,mBAApB,aAAY,EAAqBmB,cAAc,IAE/C,IAAI,IAAD,IACD/C,EAAQ4B,YAAYmH,mBAApB,UAAuC/I,EAAQ2F,MAAM/D,mBAArD,aAAuC,EAA2BmB,cAAc,IAClFpC,QAAQC,IAAR,UAAYZ,EAAQ4B,mBAApB,aAAY,EAAqBmB,cAAc,IAG/C,MAAMG,IAINsE,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,YAC3CS,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,CACzChH,QAAO,OAAE+I,QAAF,IAAEA,OAAF,EAAEA,EAAG/I,QACZoF,WAAU,OAAE2D,QAAF,IAAEA,OAAF,EAAEA,EAAG5D,MACfG,YAAW,OAAEyD,QAAF,IAAEA,OAAF,EAAEA,EAAGE,WAAWC,IAAI,GAAG/I,OAGc,MAA9CoE,SAAS4E,eAAe,qBAC1B5E,SAAS4E,eAAe,mBAAmB1E,MAAM2E,MAAQ,MAEV,MAA9C7E,SAAS4E,eAAe,qBACzB5E,SAAS4E,eAAe,mBAAmB1E,MAAM2E,MAAQ,OAEZ,MAA7C7E,SAAS4E,eAAe,oBACxB5E,SAAS4E,eAAe,kBAAkB1E,MAAM4E,KAAO,OAEzDpJ,EAAQO,GAAG8I,gBAAgB,OAC3BrJ,EAAQO,GAAG+I,OA7EY,2CAgFvBrF,CAAc,OAAC6E,QAAD,IAACA,OAAD,EAACA,EAAG/I,SAASoB,MAAK,WAC9BR,QAAQC,IAAI,gBACZ4G,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,cAlFtB,4CA4FzB,WAA8BhH,GAA9B,SAAAE,EAAA,sEAEQsD,EAAcW,YAAYnE,EAASC,GAF3C,4CA5FyB,sBA8GzB,OAtGA6H,qBAAU,WAAO,IAAD,EAE2D,EAwBjD9H,EAxBpBC,EAAQqG,wBAAR,UAAiCrG,EAAQ4E,0BAAzC,aAAiC,EAA4B7E,UAC/DY,QAAQC,IAAI,yBACZgI,GAAW,IAsBW7I,EArBN,UAACC,EAAQ4E,0BAAT,aAAC,EAA4B7E,QAsBtCc,MAAM,GAAD,OAAIV,GAAJ,4CAA0EJ,GAAW,CAE/FgB,QAAS,CACP,OAAU,mBACV,eAAgB,mBAChB,8BAA+B,QA1BlCI,KADD,uCACM,WAAOC,GAAP,yBAAAnB,EAAA,sEACiBmB,EAAIK,OADrB,OACE8H,EADF,OAEF/B,EAAS,CAACjC,KAAM,mBAAoBwB,QAASwC,IAC7C/B,EAAS,CAACjC,KAAM,iBAAkBwB,QAAO,UAAEwC,EAAO,UAAT,aAAE,EAAWxJ,UACtDyH,EAAS,CAACjC,KAAM,eAAgBwB,QAAS,CACvChH,QAAO,UAAEwJ,EAAO,UAAT,aAAE,EAAWxJ,QACpBoF,WAAU,UAAEoE,EAAO,UAAT,aAAE,EAAWrE,MACvBG,YAAW,UAAEkE,EAAO,UAAT,aAAE,EAAWP,WAAWC,IAAI,GAAG/I,OAE5CsH,EAAS,CAACjC,KAAM,0BAA2BwB,QAAO,UAAE/G,EAAQ4E,0BAAV,aAAE,EAA4B7E,UAChFyI,EAAiB,YAAIe,IACrBX,GAAW,GAXT,2CADN,wDAgBAJ,EAAiBxI,EAAQ+F,iBAG1B,WAAC/F,EAAQ4E,0BAAT,aAAC,EAA4B7E,UA+E5B,sBAAK+H,UAAU,gBAAf,UACA,sBAAKA,UAAU,mBAAmBC,QAAS,SAAC7E,GAAD,OAZjD,SAA2BA,GACzBA,EAAEmB,iBACFqE,GAAoBD,GAElBnE,SAASC,uBAAuB,0BAA0B,GAAGC,MAAMC,OADjEgE,EAC0E,OAEF,MAMtBe,CAAkBtG,IAApE,UACE,mBAAGsB,MAAO,CAAC,MAAS,OAAQiF,SAAU,QAAtC,SAA+C,gDAC/C,mBAAG3B,UAAU,iBAAb,SAA+BW,EAAkB,oBAAsB,2BAGzE,qBAAKX,UAAU,yBAAf,SACEa,EAAU,cAACR,EAAA,EAAD,IAAH,OACLpC,QADK,IACLA,OADK,EACLA,EAAe2D,KAAI,SAACZ,GAEhB,OAEE,aADF,CACE,OAAsBhB,UAAU,oBAAhC,SACE,eAAC,IAAD,CAAMA,UAAU,2BAA2BC,QAAS,WAAOc,EAAYC,IAAKa,GAC3E,CACGC,SAAQ,0BAAcd,QAAd,IAAcA,OAAd,EAAcA,EAAG/I,UAF7B,UAUA,qBAAKkI,IAAI,GAAGzH,IAAG,OAAEsI,QAAF,IAAEA,OAAF,EAAEA,EAAGE,WAAWC,IAAI,GAAG/I,MACtC,qCACC4I,QADD,IACCA,OADD,EACCA,EAAG5D,YAbN,OAAU4D,QAAV,IAAUA,OAAV,EAAUA,EAAG/I,kB,YC5HhB,SAAS8J,IAEpB,MAA4BtC,qBAAW/B,GAAvC,mBAAOxF,EAAP,KACA,GADA,KAC4CuI,oBAAS,IAArD,mBAAOuB,EAAP,KAAuBC,EAAvB,KACIxJ,EAAKP,EAAQO,GACDmH,cA0BhB,SAASsC,IACLrJ,QAAQC,IAAI,iBACZ,IAAIqJ,EAAY1J,EAAG0J,SACnB,GAAI1J,EAAG0J,SAAW,EAChB,IAAK,IAAIC,EAAI,EAAGA,EAAI3J,EAAG4J,SAAStH,OAAQqH,IAC9B3J,EAAG4J,SAASC,MAAM7J,EAAG4J,SAAStH,OAAS,EAAIqH,GAAK3J,EAAG8J,cACnD/F,SAAS4E,eAAe,mBAAmB1E,MAAM2E,MAAS5I,EAAG4J,SAASG,IAAI/J,EAAG4J,SAAStH,OAAS,EAAIqH,GAAKD,EAAY,IAAM,IAG1HtJ,QAAQC,IAAI,gBAAkBL,EAAG4J,SAASG,IAAI/J,EAAG4J,SAAStH,OAAS,EAAIqH,GAAK3J,EAAG0J,SAAY,KAAKM,QAAQ,GAAK,MAO1H,SAASC,IACR,IAAIP,EAAY1J,EAAG0J,SACfA,EAAW,IACb3F,SAAS4E,eAAe,mBAAmB1E,MAAM2E,MAAU5I,EAAG8J,YAAcJ,EAAU,IAAO,IAC7F3F,SAAS4E,eAAe,kBAAkB1E,MAAM4E,KAAQ7I,EAAG8J,YAAcJ,EAAU,IAAM,KAwC/F,SAASQ,EAAYvH,GACjBvC,QAAQC,IAAI,MACe,YAAvBZ,EAAQyD,YACZlD,EAAGmD,QAKHR,EAAEmB,iBAEF,IAAIqG,EAASxH,EAAEyH,QAAUrG,SAAS4E,eAAe,kBAAkB0B,wBAAwBxB,KAM3F,SAASyB,EAAYC,GACjB,IAAIC,EAAUD,EAAMH,QAAUD,EAASpG,SAAS4E,eAAe,WAAW0B,wBAAwBxB,KAG9F2B,EAAU,IACdA,EAAU,GAEV,IAAIC,EAAY1G,SAAS4E,eAAe,WAAW+B,YAAc3G,SAAS4E,eAAe,kBAAkB+B,YACvGF,EAAUC,IACdD,EAAUC,GAGV1G,SAAS4E,eAAe,kBAAkB1E,MAAM4E,KAAO2B,EAAU,KACjEzG,SAAS4E,eAAe,mBAAmB1E,MAAM2E,MAAQ4B,EAAU,KACnEpK,QAAQC,IAAI0D,SAAS4E,eAAe,WAAW+B,aAC/C1K,EAAG8J,YAAeU,EAAQzG,SAAS4E,eAAe,WAAW+B,YAAc1K,EAAG0J,SAlBlF3F,SAASnB,iBAAiB,YAAa0H,GACvCvG,SAASnB,iBAAiB,WAoB1B,SAAS+H,IACLvK,QAAQC,IAAI,OACZmJ,GAAkB,GACQ,YAAvB/J,EAAQyD,YACXlD,EAAGoD,OAGHW,SAAS6G,oBAAoB,UAAWD,GACxC5G,SAAS6G,oBAAoB,YAAaN,MAKlD,OAnIAhD,qBAAU,WAcN,OAZE,OAAFtH,QAAE,IAAFA,KAAI4C,iBAAiB,WAAa6G,GAClCA,IACE,OAAFzJ,QAAE,IAAFA,KAAI4C,iBAAiB,aAAcqH,GACnCA,IACAlG,SAAS4E,eAAe,WAAW/F,iBAAiB,aAAa,SAACD,GAC9DoB,SAAS4E,eAAe,kBAAkB1E,MAAM4G,QAAU,WAG9D9G,SAAS4E,eAAe,WAAW/F,iBAAiB,YAAY,SAACD,GAC7DoB,SAAS4E,eAAe,kBAAkB1E,MAAM4G,QAAU,UAGvD,WAED,OAAF7K,QAAE,IAAFA,KAAI4K,oBAAoB,WAAYnB,GAClC,OAAFzJ,QAAE,IAAFA,KAAI4K,oBAAoB,aAAcX,MAK3C,IA8GC,sBAAKtC,GAAG,UAAUJ,UAAU,UAAUC,QApF1C,SAAmB7E,GAEhB,GADCA,EAAEmB,iBACCyF,EACFC,GAAkB,OADpB,CAIApJ,QAAQC,IAAI,SACZL,EAAGmD,QAEH/C,QAAQC,IAAI0D,SAAS4E,eAAe,kBAAkB+B,aAGtD,IAAIF,EAAU7H,EAAEyH,QAAUrG,SAAS4E,eAAe,WAAW0B,wBAAwBxB,KAG3E2B,EAAU,IACZA,EAAU,GAEZ,IAAIC,EAAY1G,SAAS4E,eAAe,WAAW+B,YAAc3G,SAAS4E,eAAe,kBAAkB+B,YACvGF,EAAUC,IACZD,EAAUC,GAGZ1G,SAAS4E,eAAe,kBAAkB1E,MAAM4E,KAAO2B,EAAU,KACjEzG,SAAS4E,eAAe,mBAAmB1E,MAAM2E,MAAQ4B,EAAU,KACnEpK,QAAQC,IAAIL,EAAG0J,UACftJ,QAAQC,IAAKmK,EAAQzG,SAAS4E,eAAe,WAAWmC,YAAc9K,EAAG0J,UAGzE1J,EAAG8J,YAAeU,EAAQzG,SAAS4E,eAAe,WAAWmC,YAAc9K,EAAG0J,SACpD,YAAvBjK,EAAQyD,YACTlD,EAAGoD,SAqDV,UACI,sBAAMuE,GAAG,oBACT,qBAAKA,GAAG,oBACR,qBAAKoD,YAAa,kBAAM,GAAOC,aAAcd,EAAaA,YAAaA,EAAavC,GAAG,sB,aCsOpFsD,MAhXf,WAAoB,IAAD,IACTzL,EAAY0L,cAAZ1L,QACF0H,EAAUC,cAId,EAA4BH,qBAAW/B,GAAvC,mBAAOxF,EAAP,KAAgBwH,EAAhB,KACIjH,EAAKP,EAAQO,GACjB,EAA8BgI,oBAAS,GAAvC,mBAAOI,EAAP,KACA,GADA,KACwCJ,mBAAS,IAAjD,mBAAOmD,EAAP,KAAqBC,EAArB,KACA,EAA8CpD,mBAAS,GAAvD,mBAAOqD,EAAP,KAAwBC,EAAxB,KA0FD,SAASC,IAERH,EAAgBpL,EAAG0J,UAGhB1J,EAAG0J,SAAW,GACf4B,EAAmBtL,EAAG8J,aAQzB,SAASL,IAERrJ,QAAQC,IAAI,iBAEZ4G,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,WAG3C/G,EAAQO,GAAGoD,OAAOxC,MAAK,WACrBqG,EAAS,CAACjC,KAAM,gBAAiBwB,QAAS,eACzCnD,OAAM,SAACC,GAIR2D,EAAS,CAACjC,KAAM,gBAAiBwB,QAAS,cAG5BxG,EAAG0J,SAEnB,GAAI1J,EAAG0J,SAAW,EAChB,IAAK,IAAIC,EAAI,EAAGA,EAAI3J,EAAG4J,SAAStH,OAAQqH,IAC9B3J,EAAG4J,SAASC,MAAM7J,EAAG4J,SAAStH,OAAS,EAAIqH,GAAK3J,EAAG8J,aAInD1J,QAAQC,IAAI,gBAAkBL,EAAG4J,SAASG,IAAI/J,EAAG4J,SAAStH,OAAS,EAAIqH,GAAK3J,EAAG0J,SAAY,KAAKM,QAAQ,GAAK,KAO1H,SAASC,IAER,IAAIP,EAAY1J,EAAG0J,SACnB0B,EAAgBpL,EAAG0J,UAGfA,EAAW,GACb4B,EAAmBtL,EAAG8J,aAgD1B,SAAS0B,EAAYC,GAAa,IAAD,EAI/B,OAFArL,QAAQC,IAAIoL,GACZrL,QAAQC,IAAIZ,EAAQ4E,oBACboH,GACL,IAAK,OACHxE,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,YAC7CS,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS/G,EAAQ4E,qBAED,MAA9CN,SAAS4E,eAAe,qBAC1B5E,SAAS4E,eAAe,mBAAmB1E,MAAM2E,MAAQ,MAEV,MAA9C7E,SAAS4E,eAAe,qBACzB5E,SAAS4E,eAAe,mBAAmB1E,MAAM2E,MAAQ,OAEZ,MAA7C7E,SAAS4E,eAAe,oBACxB5E,SAAS4E,eAAe,kBAAkB1E,MAAM4E,KAAO,OAEzDpJ,EAAQO,GAAG8I,gBAAgB,OAC3BrJ,EAAQO,GAAG+I,OAGX/F,EAAcW,YAAd,OAA0BlE,QAA1B,IAA0BA,GAA1B,UAA0BA,EAAS4E,0BAAnC,aAA0B,EAA6B7E,QAASC,GAASmB,MAAK,WAC5ER,QAAQC,IAAI,gBACZ4G,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,cAG3C,MACF,IAAK,OAMHS,EAAS,CAACjC,KAAM,gBAAiBwB,QAAS,WAC1CS,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,YAC3CxD,EAAchC,aAAd,OAA2BvB,QAA3B,IAA2BA,OAA3B,EAA2BA,EAASyG,aAAatF,MAAK,SAAC2H,GAAO,IAAD,QAE3DnI,QAAQC,IAAR,OAAYkI,QAAZ,IAAYA,GAAZ,UAAYA,EAAGE,YAAY,OAADF,QAAC,IAADA,GAAA,UAAAA,EAAGE,kBAAH,eAAenG,QAAS,UAAlD,aAAY,EAA0C3C,KACtDsH,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,CACzChH,QAAO,OAAEC,QAAF,IAAEA,OAAF,EAAEA,EAASyG,YAClBtB,WAAU,OAAE2D,QAAF,IAAEA,OAAF,EAAEA,EAAG5D,MACfG,YAAW,OAAEyD,QAAF,IAAEA,GAAF,UAAEA,EAAGE,YAAY,OAADF,QAAC,IAADA,GAAA,UAAAA,EAAGE,kBAAH,eAAenG,QAAS,UAAxC,aAAE,EAA0C3C,OAE3DqD,EAAcW,YAAd,OAA0BlE,QAA1B,IAA0BA,OAA1B,EAA0BA,EAASyG,YAAazG,GAASmB,MAAK,WAExDN,MAAMb,EAAQO,GAAGC,KAAKW,MAAK,WACzBqG,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,WAC3C/G,EAAQO,GAAGoD,OACX6D,EAAS,CAACjC,KAAM,gBAAiBwB,QAAS,eAE3CnD,OAAM,SAAAqI,GACLzE,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,WAC3CS,EAAS,CAACjC,KAAM,gBAAiBwB,QAAS,oBAoBxD,OAjQEc,qBAAU,WACN7C,OAAOkH,WAAa,WAChBzE,EAAQ/E,KAAK,SAIrBmF,qBAAU,WAiDV,OA/CElH,QAAQC,IAAI,cACZD,QAAQC,IAAIb,GAEZY,QAAQC,IAAID,QAAQC,IAAIZ,EAAQ4E,qBAChCjE,QAAQC,IAAIuL,OAAOC,KAAKpM,EAAQ4E,oBAAoB/B,QACE,GAAlDsJ,OAAOC,KAAKpM,EAAQ4E,oBAAoB/B,SAE1C2E,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,YAE3CxD,EAAchC,aAAaxB,GAASoB,MAAK,SAAC2H,GAAO,IAAD,QAE9CnI,QAAQC,IAAR,OAAYkI,QAAZ,IAAYA,GAAZ,UAAYA,EAAGE,YAAY,OAADF,QAAC,IAADA,GAAA,UAAAA,EAAGE,kBAAH,eAAenG,QAAS,UAAlD,aAAY,EAA0C3C,KACtDsH,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,CACzChH,QAASA,EACToF,WAAU,OAAE2D,QAAF,IAAEA,OAAF,EAAEA,EAAG5D,MACfG,YAAW,OAAEyD,QAAF,IAAEA,GAAF,UAAEA,EAAGE,YAAY,OAADF,QAAC,IAADA,GAAA,UAAAA,EAAGE,kBAAH,eAAenG,QAAS,UAAxC,aAAE,EAA0C3C,OAE3DqD,EAAcU,eAAelE,EAASC,GAASmB,MAAK,WAK5CnB,EAAQO,GAAGG,OAAQ,SAY3B,OAAFH,QAAE,IAAFA,KAAI4C,iBAAiB,iBAAkB2I,GACrC,OAAFvL,QAAE,IAAFA,KAAI4C,iBAAiB,WAAa6G,GAChC,OAAFzJ,QAAE,IAAFA,KAAI4C,iBAAiB,aAAcqH,GAKnCjH,EAAcoB,qBAAd,OAAmC3E,QAAnC,IAAmCA,OAAnC,EAAmCA,EAAS4E,oBAC5CiH,EAAkB,OAACtL,QAAD,IAACA,OAAD,EAACA,EAAI8J,aACvBsB,EAAe,OAACpL,QAAD,IAACA,OAAD,EAACA,EAAI0J,UACpBzC,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,QAGtC,WAEH,OAAFxG,QAAE,IAAFA,KAAI4K,oBAAoB,WAAYnB,GAClC,OAAFzJ,QAAE,IAAFA,KAAI4K,oBAAoB,aAAcX,GACtChD,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,WAG3C,CAAC/G,EAAQ4E,qBAqMX,qBAAKkD,UAAU,kBAAf,SAIA,sBAAKA,UAAU,SAAf,UACI,qBAAKA,UAAU,WAAf,SACI,qBAAKtH,IAAG,OAAER,QAAF,IAAEA,GAAF,UAAEA,EAAS4E,0BAAX,aAAE,EAA6BS,gBAG3C,qBAAKyC,UAAU,mBAAf,SACI,qBAAKI,GAAG,cAAR,gBAAuBlI,QAAvB,IAAuBA,GAAvB,UAAuBA,EAAS4E,0BAAhC,aAAuB,EAA6BO,eAMxD,cAAC,EAAD,IACA,sBAAK+C,GAAG,WAAR,UACA,8BAAMS,EAAU,OAAS0D,SAAUT,EAAkB,GAAM,IAAIU,WAAa,IAAKD,SAAST,EAAkB,IAAIW,eAAe,QAAS,CAACC,qBAAsB,EAAGC,aAAY,MAC9K,8BAAM9D,EAAU,OAAS0D,SAAUX,EAAe,GAAM,IAAIY,WAAa,IAAKD,SAASX,EAAe,IAAIa,eAAe,QAAS,CAACC,qBAAsB,EAAGC,aAAY,SAWtK,qBAAK3E,UAAU,kBAAf,SACwB,YAAxB9H,EAAQoG,YACR,8BAAK,cAAC+B,EAAA,EAAD,MAEL,sBAAK3D,MAAO,CAAC,QAAY,OAAQ,cAAiB,MAAO,eAAkB,eAAgB,WAAc,UAAzG,UAEA,wBAAQuD,QAAS,WAAOgE,EAAY,SAApC,SACA,sBAAM7D,GAAG,UAAUJ,UAAU,iBAA7B,6BAGA,cAAC4E,EAAA,EAAD,CAAYlI,MAAO,CAAC,OAAW,QAAS,gBAAmB,UAAWuD,QAtI9E,SAAmB7E,GAKjB,OAJAA,EAAEmB,iBAEF1D,QAAQC,IAAIZ,EAAQyD,YAEbzD,EAAQyD,YACb,IAAK,UACH+D,EAAS,CAACjC,KAAM,gBAAiBwB,QAAS,WAC1C,MACF,IAAK,SACHS,EAAS,CAACjC,KAAM,gBAAiBwB,QAAS,YAC1C,MACF,IAAK,QACHS,EAAS,CAACjC,KAAM,gBAAiBwB,QAAS,YAyHxC,SACA,sBAAMmB,GAAG,UAAUJ,UAAU,iBAA7B,SA+BR,WACE,OAAO9H,EAAQyD,YACb,IAAK,SACH,MAAO,aACT,IAAK,UACH,MAAO,QACT,IAAK,QACH,MAAO,YACT,QACE,MAAO,cAvCHD,OAKF,wBAAQuE,QAAS,WAAOgE,EAAY,SAApC,SACA,sBAAM7D,GAAG,UAAUJ,UAAU,iBAA7B,oC,MCjOK6E,MAlGf,SAAoB1F,GAEhB,MAA4BM,qBAAW/B,GAAvC,mBAAgBgC,GAAhB,WACMC,EAAUC,cAkBhB,SAASkF,EAAe1J,GACpBK,EAAcY,mBAAmBjB,EAAG,OACpCsE,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,QAC3Ca,YAAW,kBAAMH,EAAQ/E,KAAK,OAAM,KAwDxC,OAvEAmF,qBAAU,WAKN,OAAO,gBAoEP,cADA,CACA,OAAKC,UAAU,aAAf,UACI,wBAAQtD,MAAO,CAAEqI,MAAO,QAAxB,SACA,cAAC,IAAD,CAAM9E,QAAS,SAAC7E,GAAO0J,EAAe1J,IAAKsB,MAAO,CAAEsI,eAAgB,QAASnD,GAAG,IAAI7B,UAAU,iBAA9F,mCAGA,cAAC,EAAD,CAASb,MAAOA,IAGhB,cAAC,EAAD,CAAeA,MAAOA,Q,yBCmEnB8F,MA/Jf,WAGI,MAAsCxE,qBAAtC,mBAAOyE,EAAP,KAAoBC,EAApB,KACA,EAA0B1E,qBAA1B,mBAAc2E,GAAd,WACA,EAAwC3E,oBAAS,GAAjD,mBAAO4E,EAAP,KAAqBC,EAArB,KACA,EAAkC7E,mBAAS,IAA3C,mBAAOjC,EAAP,KAAkB+G,EAAlB,KACA,EAA4B9F,qBAAW/B,GAAvC,mBAAOxF,EAAP,KAAgBwH,EAAhB,KACMC,EAAUC,cAIhBG,qBAAU,WAAM,IAAD,EAQX,OAPAlH,QAAQC,IAAI,gBACZD,QAAQC,IAAIZ,EAAQsG,YACV,OAAPtG,QAAO,IAAPA,GAAA,UAAAA,EAAS8F,oBAAT,eAAuBjD,QAAS,QAA+BQ,KAAnB,OAAPrD,QAAO,IAAPA,OAAA,EAAAA,EAAS8F,cAA6B,MAC1EmH,EAAejN,EAAQ8F,cAE3BuH,EAAarN,EAAQsG,WAEd,WACH3F,QAAQC,IAAI,kBACZD,QAAQC,IAAIoM,GACZrM,QAAQC,IAAI0F,GACZkB,EAAS,CAACjC,KAAM,oBAAqBwB,QAAST,IAC9CkB,EAAS,CAACjC,KAAM,kBAAmBwB,QAASiG,OAEjD,QAAChN,QAAD,IAACA,OAAD,EAACA,EAASsG,YAEb,IAAMgH,EAAyBC,sBAAaC,IAAEC,UAsGlD,SAAoB3C,GAAO,IAAD,QACtBuC,EAAY,OAACvC,QAAD,IAACA,GAAD,UAACA,EAAO4C,cAAR,aAAC,EAAe/K,OAC5ByK,GAAgB,GAChBzM,QAAQC,IAAR,OAAYkK,QAAZ,IAAYA,GAAZ,UAAYA,EAAO4C,cAAnB,aAAY,EAAe/K,OAC3BuK,EAAQ,OAACpC,QAAD,IAACA,GAAD,UAACA,EAAO4C,cAAR,aAAC,EAAe/K,OAExB9B,MAAM,GAAD,OAAIV,GAAJ,oBAA0D,CAE7DW,OAAQ,OACRC,QAAS,CACP,OAAU,mBACV,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBoF,UAAS,OAAGwE,QAAH,IAAGA,GAAH,UAAGA,EAAO4C,cAAV,aAAG,EAAe/K,UAG9BxB,KAXD,uCAYI,WAAOC,GAAP,mBAAAnB,EAAA,sEACyBmB,EAAIK,OAD7B,OACQD,EADR,OAEIb,QAAQC,IAAR,UAAYY,EAAS,UAArB,iBAAY,EAAa0G,UAAzB,aAAY,EAAiBnI,SAC7BkN,EAAe,YAAIzL,IACnB4L,GAAgB,GAJpB,2CAZJ,yDA5GmE,KAAQ,IAE3E,OACI,gCACI,wCACA,uBAAO7H,KAAK,OAAOoI,YAAY,kDAAkDC,SAAUN,IAO3F,qBAAKxF,UAAU,0BAAf,SAA2CqF,EAAe,qBAAK3I,MAAO,CAACqJ,WAAY,OAAzB,SAAkC,cAAC1F,EAAA,EAAD,MAArC,OACvD6E,QADuD,IACvDA,OADuD,EACvDA,EAAatD,KAAI,SAACZ,GAAM,IAAD,UAEnB,OAEA,aADA,CACA,OAAKhB,UAAU,YAAf,SACI,eAAC,IAAD,CAAMA,UAAU,iBAAiBC,QAAU,SAAC7E,IA/C3C,sCA+CkD4K,CAAW5K,EAAG4F,IAA2Ba,GAAE,0BAAcb,QAAd,IAAcA,GAAd,UAAcA,EAAGZ,UAAjB,aAAc,EAAOnI,SAAnH,UACI,qBAAKkI,IAAI,GAAGzH,IAAG,OAAEsI,QAAF,IAAEA,GAAF,UAAEA,EAAG/B,eAAL,iBAAE,EAAYiC,kBAAd,iBAAE,EAAwB+E,eAA1B,aAAE,EAAiC7N,MAClD,qCACK4I,QADL,IACKA,OADL,EACKA,EAAG5D,UAHZ,OAA4E4D,QAA5E,IAA4EA,GAA5E,UAA4EA,EAAGZ,UAA/E,aAA4E,EAAOnI,mBAuBvG,SAAS4H,EAAWmB,GACW,MAAvB9I,EAAQoE,iBAAsBf,GAC9BmE,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,QAC3CS,EAAS,CAACjC,KAAM,kBAAmBwB,QAASiG,IAC5CpF,YAAW,wBAAMH,EAAQ/E,KAAR,0BAAyBoG,QAAzB,IAAyBA,GAAzB,UAAyBA,EAAGZ,UAA5B,aAAyB,EAAOnI,YAAY,MAEhC,QAAxBC,EAAQoE,aACboD,EAAS,CAACjC,KAAM,kBAAmBwB,QAASiG,IAC5CxF,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,SAEd,QAAxB/G,EAAQoE,cACboD,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,QAC3CS,EAAS,CAACjC,KAAM,kBAAmBwB,QAASiG,IAC5CpF,YAAW,wBAAMH,EAAQ/E,KAAR,0BAAyBoG,QAAzB,IAAyBA,GAAzB,UAAyBA,EAAGZ,UAA5B,aAAyB,EAAOnI,YAAY,MAnFhD,4CAwFrB,WAA0BmD,EAAG4F,GAA7B,uBAAA7I,EAAA,sDACIiD,EAAEmB,iBACFrE,EAAQO,GAAG8I,gBAAgB,OAC3BrJ,EAAQO,GAAG+I,OACX9B,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,YAC3CS,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,CACvChH,QAAO,OAAE+I,QAAF,IAAEA,GAAF,UAAEA,EAAGZ,UAAL,aAAE,EAAOnI,QAChBoF,WAAU,OAAE2D,QAAF,IAAEA,OAAF,EAAEA,EAAG5D,MACfG,YAAW,OAAEyD,QAAF,IAAEA,GAAF,UAAEA,EAAG/B,eAAL,iBAAE,EAAYiC,kBAAd,iBAAE,EAAwB+E,eAA1B,aAAE,EAAiC7N,OAUlD+D,EAAc,OAAC6E,QAAD,IAACA,GAAD,UAACA,EAAGZ,UAAJ,aAAC,EAAOnI,SAASoB,MAAK,WAChCR,QAAQC,IAAI,gBACZ4G,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,cAG/CY,EAAWmB,GAvBf,4CAxFqB,+BAwHN7E,EAxHM,8EAwHrB,WAA8BlE,GAA9B,SAAAE,EAAA,sEAEUsD,EAAcW,YAAYnE,EAASC,GAF7C,4CAxHqB,wB,kDCmCNgO,MAtCf,YAA0C,IAArBC,EAAoB,EAApBA,MAAOC,EAAa,EAAbA,YAExB,EAAiC3F,qBAAjC,mBAAM4F,EAAN,KAAiBC,EAAjB,KACA,EAA4B7G,qBAAW/B,GAAvC,mBAQA,OARA,UAEAqC,qBAAU,WACJlH,QAAQC,IAAI,sBAEZwN,EAAaH,KACd,CAACA,IAGF,qBAAKnG,UAAU,kBAAf,gBAGIqG,QAHJ,IAGIA,OAHJ,EAGIA,EAAWzE,KAAI,SAAC2E,GACZ,OACJ,cAACC,EAAA,EAAD,CAA0B9J,MAAO,CAAC,QAAY,eAAgB,WAAc,WAAY,MAAS,MAAO,OAAU,OAAQ,OAAU,QAApI,SACA,eAAC+J,EAAA,EAAD,CAAgBxG,QAAS,SAAC7E,GAAOgL,EAAYhL,EAAG,CAACnD,QAAO,OAAEsO,QAAF,IAAEA,OAAF,EAAEA,EAAMtO,QAASmF,MAAK,OAAEmJ,QAAF,IAAEA,OAAF,EAAEA,EAAMnJ,MAAOsJ,SAAQ,OAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAMG,YAA7G,UACI,cAACC,EAAA,EAAD,CACAC,UAAU,MACVjK,OAAO,MACPkK,MAAK,OAAEN,QAAF,IAAEA,OAAF,EAAEA,EAAMG,SACbvG,IAAI,YACJzD,MAAO,CAACoK,UAAW,UAEnB,cAACC,EAAA,EAAD,iBACKR,QADL,IACKA,OADL,EACKA,EAAMnJ,YAVf,OAAWmJ,QAAX,IAAWA,OAAX,EAAWA,EAAMtO,e,kBCwJd+O,IC3KFC,EAAS,CAClB,CACEC,IAAK,OACLN,UDGN,SAAkBzH,GAEd,MAA4BM,qBAAW/B,GAAvC,mBAAOxF,EAAP,KAAgBwH,EAAhB,KACMC,EAAUC,cAChB,EAA0Ca,qBAA1C,mBAAO0G,EAAP,KAAsBC,EAAtB,KACA,EAAsC3G,qBAAtC,mBAAO4G,EAAP,KAAoBC,EAApB,KAEAvH,qBAAU,WACNlH,QAAQC,IAAI,oBAEmB,OAAnB,OAAPZ,QAAO,IAAPA,OAAA,EAAAA,EAAS0G,gBAAoD,OAAjB,OAAP1G,QAAO,IAAPA,OAAA,EAAAA,EAAS2G,cACnD0I,EAAgB,kBAAkBlO,KAAlC,uCACI,WAAOC,GAAP,iBAAAnB,EAAA,sEAEyBmB,EAAIK,OAF7B,OAEQD,EAFR,OAKQ8N,EAAmB9N,EAAS+N,QAAO,SAAArF,GAAC,OAAIsF,EAAuB,OAACtF,QAAD,IAACA,OAAD,EAACA,EAAGuF,eAAiB,OACvF/F,KAAI,SAACgG,GAAS,IAAD,QACV,MAAO,CACPlB,SAAQ,OAAEkB,QAAF,IAAEA,GAAF,UAAEA,EAAK3I,eAAP,iBAAE,EAAciC,kBAAhB,iBAAE,EAA0B2G,YAA5B,aAAE,EAAgCzP,IAC1CgF,MAAK,OAAEwK,QAAF,IAAEA,OAAF,EAAEA,EAAKxK,MACZnF,QAAO,OAAE2P,QAAF,IAAEA,GAAF,UAAEA,EAAKxH,UAAP,aAAE,EAASnI,YAGtBmP,EAAiBI,GAEjB9H,EAAS,CAACjC,KAAM,mBAAoBwB,QAASuI,IAfjD,2CADJ,uDAmBAD,EAAgB,4BAA4BlO,KAA5C,uCACI,WAAOC,GAAP,iBAAAnB,EAAA,sEACyBmB,EAAIK,OAD7B,OACQD,EADR,OAGQ8N,EAAmB9N,EAAS+N,QAAO,SAAArF,GAAC,OAAIsF,EAAuB,OAACtF,QAAD,IAACA,OAAD,EAACA,EAAGuF,eAAiB,OACvF/F,KAAI,SAACgG,GAAS,IAAD,QACV,MAAO,CACPlB,SAAQ,OAAEkB,QAAF,IAAEA,GAAF,UAAEA,EAAK3I,eAAP,iBAAE,EAAciC,kBAAhB,iBAAE,EAA0B2G,YAA5B,aAAE,EAAgCzP,IAC1CgF,MAAK,OAAEwK,QAAF,IAAEA,OAAF,EAAEA,EAAKxK,MACZnF,QAAO,OAAE2P,QAAF,IAAEA,GAAF,UAAEA,EAAKxH,UAAP,aAAE,EAASnI,YAItBqP,EAAeE,GACf9H,EAAS,CAACjC,KAAM,iBAAkBwB,QAASuI,IAb/C,2CADJ,yDAkBIJ,EAAiBlP,EAAQ0G,eACzB0I,EAAepP,EAAQ2G,gBAE5B,IAEH,IAAM6I,EAA0B,SAACvF,GAC7B,IAAI2F,EAAG,OAAG3F,QAAH,IAAGA,OAAH,EAAGA,EAAU4F,MAAM,KACtBC,EAAU,EACd,cAAOF,QAAP,IAAOA,OAAP,EAAOA,EAAK/M,QACR,KAAK,EACDiN,EAAkC,GAAvBzD,SAASuD,EAAI,GAAI,IAAW,GAA8B,GAAvBvD,SAASuD,EAAI,GAAI,IAAYvD,SAASuD,EAAI,GAAI,IAAK,MACrG,KAAK,EACDE,EAAkC,GAAvBzD,SAASuD,EAAI,GAAI,IAAYvD,SAASuD,EAAI,GAAI,IAAK,MAClE,KAAK,EACDE,EAAUzD,SAASuD,EAAI,GAAI,IAGnC,OAAOE,GAGX,SAAST,EAAgB/I,GACrB,OAAOzF,MAAM,GAAD,OAAIV,GAAJ,oBAA0D,CACpEW,OAAQ,OACRC,QAAS,CACP,OAAU,mBACV,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBoF,UAAWA,MAuBnB,SAASwH,EAAW5K,EAAG4F,GACnB5F,EAAEmB,iBACFrE,EAAQO,GAAG8I,gBAAgB,OAC3BrJ,EAAQO,GAAG+I,OACX9B,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,YAC3CS,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,CACvChH,QAAO,OAAE+I,QAAF,IAAEA,OAAF,EAAEA,EAAG/I,QACZoF,WAAU,OAAE2D,QAAF,IAAEA,OAAF,EAAEA,EAAG5D,MACfG,YAAW,OAAEyD,QAAF,IAAEA,OAAF,EAAEA,EAAG0F,YA3GJ,2CA8GhBvK,CAAc,OAAC6E,QAAD,IAACA,OAAD,EAACA,EAAG/I,SAASoB,MAAK,WAC5BR,QAAQC,IAAI,gBACZ4G,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,cA3BnD,SAAoB+B,GACW,MAAvB9I,EAAQoE,iBAAsBf,GAC9BmE,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,QAC3Ca,YAAW,kBAAMH,EAAQ/E,KAAR,0BAAyBoG,QAAzB,IAAyBA,OAAzB,EAAyBA,EAAG/I,YAAY,MAE5B,QAAxBC,EAAQoE,YACboD,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,QAEd,QAAxB/G,EAAQoE,cACboD,EAAS,CAACjC,KAAM,iBAAkBwB,QAAS,QAC3Ca,YAAW,kBAAMH,EAAQ/E,KAAR,0BAAyBoG,QAAzB,IAAyBA,OAAzB,EAAyBA,EAAG/I,YAAY,MAoB7D4H,CAAWmB,GAnHK,4CAsHpB,WAA8B/I,GAA9B,SAAAE,EAAA,sEAEUsD,EAAcW,YAAYnE,EAASC,GAF7C,4CAtHoB,sBA2HpB,IAAM+P,EAAe,SAAC,GAAkB,IAAjBC,EAAgB,EAAhBA,WACnB,OACI,qBAAKxL,MAAO,CAAG4G,QAAS,OAAO6E,cAAe,MAAQC,eAAgB,gBAAtE,SAESC,MAAMC,KACH,CAAEvN,OAAQmN,IACV,SAACxC,EAAGtD,GAAJ,OACI,eAACmG,EAAA,EAAD,CAAaC,GAAI,CAAEC,GAAI,IAAO/L,MAAO,CAAC2E,MAAO,OAAQ1E,OAAO,OAAQ+L,OAAQ,QAA5E,UACI,cAACC,EAAA,EAAD,CAAUC,QAAQ,OAAOlM,MAAO,CAAC2E,MAAO,OAAQ1E,OAAO,UACvD,cAACgM,EAAA,EAAD,IACA,cAACA,EAAA,EAAD,MAHMvG,SAalC,OACI,sBAAKpC,UAAU,WAAf,UACI,+CAEA,oBAAItD,MAAO,CAAC,UAAa,QAAzB,4BAEkB,MAAjByK,OAAwB5L,EACzB,cAAC0M,EAAD,CAAcC,WAAY,IAE1B,cAAC,EAAD,CAAY/B,MAAOgB,EAAef,YAAaJ,IAE/C,oBAAItJ,MAAO,CAAC,UAAa,QAAzB,4BACgB,MAAf2K,OAAsB9L,EACvB,cAAC0M,EAAD,CAAcC,WAAY,IAE1B,cAAC,EAAD,CAAY/B,MAAOkB,EAAajB,YAAaJ,QChKnD6C,KAAM,KAER,CACE3B,IAAK,SACLN,UAAW3B,EACX4D,KAAM,WAER,CACE3B,IAAK,SACLN,UAAW/B,EACXgE,KAAM,sB,MCbG,SAASC,IAAU,IAAD,IAG7B,OACI,qBAAK9I,UAAU,kBAAf,SACI,+BACI,oBAAIA,UAAU,aAAd,SACA,eAAC,IAAD,CAAMA,UAAU,aAAa6B,GAAE,UAAEoF,EAAO8B,MAAK,SAAAC,GAAC,MAAa,QAATA,EAAE9B,cAArB,aAAE,EAAmC2B,KAApE,UACI,sBAAM7I,UAAU,sBAAhB,kBACA,sBAAMA,UAAU,YAAhB,uBAIJ,oBAAIA,UAAU,aAAd,SACA,eAAC,IAAD,CAAMA,UAAU,aAAa6B,GAAE,UAAEoF,EAAO8B,MAAK,SAAAC,GAAC,MAAa,UAATA,EAAE9B,cAArB,aAAE,EAAqC2B,KAAtE,UACI,sBAAM7I,UAAU,sBAAhB,oBACA,sBAAMA,UAAU,YAAhB,yBAIJ,qBAAIA,UAAU,aAAd,UACI,sBAAMA,UAAU,sBAAhB,sBACA,sBAAMA,UAAU,YAAhB,+B,mBC8DLiJ,MA7Ef,WAEE,MAA4BxJ,qBAAW/B,GAAvC,mBAAOxF,EAAP,KACA,GADA,KAC0CuI,oBAAS,IAAnD,mBAAOyI,EAAP,KAAsBC,EAAtB,KACMC,EAAWC,cA2CjB,OAzCAtJ,qBAAU,WAWR,OATAlH,QAAQC,IAAIK,KAAKmQ,MAAMpM,OAAOqM,aAAaC,QAAQ,WAEnD3Q,QAAQC,IAAI,iBAAkBT,cAC9BQ,QAAQC,IAAI,kBAAmBT,IAE/B6E,OAAO7B,iBAAiB,UAAU,WAAO8N,EAAiBpM,UAAU0M,WACpEvM,OAAO7B,iBAAiB,WAAW,WAAO8N,EAAiBpM,UAAU0M,WAG9D,WACL5Q,QAAQC,IAAI,WACZoE,OAAOmG,oBAAoB,UAAU,WAAO8F,EAAiBpM,UAAU0M,WACvEvM,OAAOmG,oBAAoB,WAAW,WAAO8F,EAAiBpM,UAAU0M,WACxEvM,OAAOqM,aAAaG,QAAQ,QAASvQ,KAAKC,UAAUlB,OAEtD,IA0BA,sBAAK8H,UAAU,eAAf,UAGI,qBAAKA,UAAU,UAAf,SACE,cAAC,IAAD,UACCiH,EAAOrF,KAAI,SAAAzC,GAAK,OAAI,cAAC,IAAD,aAAOwK,OAAK,GAAKxK,WAIxC,sBAAKa,UAAU,kBAAf,UAC2B,QAAxB9H,EAAQoE,YAAwB,cAAC,EAAD,IAAiB,KAE/C8M,EAAStH,SAAS8H,SAAS,WAA0B,KAAb,cAAC,EAAD,OAG7C,cAACC,EAAA,EAAD,CACAnN,MAAO,CAAC,OAAU,KAClBoN,aAAc,CAAEC,SAAU,SAAUC,WAAY,SAChDC,QAAQ,yBACRC,iBAAkB,IAClBC,MAAOjB,QCrEKkB,QACW,cAA7BlN,OAAOkM,SAASiB,UAEe,UAA7BnN,OAAOkM,SAASiB,UAEhBnN,OAAOkM,SAASiB,SAASC,MAAM,2DCjBnC,IAYeC,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBpR,MAAK,YAAkD,IAA/CqR,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCIdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,UACE,cAAC,IAAD,UACE,cAAC,EAAD,UAINzO,SAAS4E,eAAe,SF4GpB,kBAAmBrE,WACrBA,UAAUmO,cAAcC,MACrB9R,MAAK,SAAC+R,GACLA,EAAaC,gBAEdvP,OAAM,SAACC,GACNlD,QAAQkD,MAAMA,EAAMkO,YEvG5BM,M","file":"static/js/main.fcbf1289.chunk.js","sourcesContent":["\r\nconst PlayerService = {\r\n  setPlayButton: setPlayButton,\r\n  getVideoInfo: getVideoInfo,\r\n  getMIMEType: getMIMEType,\r\n  setSource : onSourceOpen,\r\n  setAudioSource: setAudioSource,\r\n  setAudioUrl: setAudioUrl,\r\n  setPlayerApperance: SetPlayerApperance,\r\n  setNotificationLabel: setNotificationLabel\r\n}\r\n\r\nfunction setPlayButton(me, audioState){\r\n  switch(audioState){\r\n      case \"paused\":\r\n        me.pause();\r\n        break;\r\n      case \"playing\":\r\n        me.play()\r\n        .then(() =>{\r\n          // setNotificationLabel()\r\n        }).catch((error) => {\r\n          // Auto-play was prevented\r\n          // Show paused UI.\r\n          // console.log(\"playback prevented\");\r\n        });\r\n        break;\r\n      default:\r\n        break;\r\n  }\r\n}\r\n\r\nfunction setAudioState(ctx, audioState){\r\n  switch(audioState){\r\n      case \"paused\":\r\n        ctx.audioState = \"paused\"\r\n        break;\r\n      case \"playing\":\r\n        ctx.audioState = \"playing\"\r\n        break;\r\n      case \"error\":\r\n        console.log(\"setting error flag\")\r\n        ctx.audioState = \"error\"\r\n        break;\r\n      default:\r\n        break;\r\n  }\r\n}\r\n\r\nfunction SetPlayerApperance(e, playerState){\r\n  switch(playerState){\r\n    case \"max\":\r\n      e.preventDefault()\r\n      document.getElementsByClassName(\"mini-player\")[0].style.height = 'calc(500%)'\r\n      document.getElementsByClassName(\"mini-player\")[0].style.transform = 'translateY(calc(-300%))'\r\n      break;\r\n    case \"min\":\r\n      e.preventDefault();\r\n      document.getElementsByClassName(\"playerContainer\")[0].style.transform = 'translateY(calc(100%))';\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nfunction setNotificationLabel(currentSongDetails){\r\n  if ('mediaSession' in navigator) {\r\n    console.log(\"media session works\")\r\n  navigator.mediaSession.metadata = new window.MediaMetadata({\r\n    title: currentSongDetails.trackTitle,\r\n    artwork: [\r\n      {\r\n        src: currentSongDetails.albumArtUrl == null || undefined ? '' : currentSongDetails.albumArtUrl,\r\n        sizes: '512x512',\r\n        type: 'image/png',\r\n      },\r\n    ],\r\n  })\r\n\r\n  // navigator.mediaSession.setActionHandler('play', function() { dispatch({type: \"setAudioState\", snippet: \"playing\"}) });\r\n  // navigator.mediaSession.setActionHandler('pause', function() { dispatch({type: \"setAudioState\", snippet: \"paused\"}) });\r\n}\r\n}\r\nasync function setAudioSource(videoId, context){\r\n   let url = `${process.env.REACT_APP_API_BASE_URL}/api/ytdl/download-video-ytdl-player2?videoUrl=${encodeURIComponent(`https://www.youtube.com/watch?v=${videoId}`)}`\r\n  // context.me.src = `${process.env.REACT_APP_API_BASE_URL}/api/ytdl/download-video-ytdl-player2?videoUrl=${encodeURIComponent(`https://www.youtube.com/watch?v=${videoId}`)}`\r\n  // context.me.autoplay=true;\r\n  // context.me.controls = false;\r\n  // context.me.setAttribute('crossorigin', '');\r\n  // document.body.appendChild(context.me);\r\n\r\n  var audio = new Audio(url)\r\n  context.me.src = url;\r\n  audio.crossOrigin = \"anonymous\"\r\n  context.me.muted = true;\r\n\r\n  // audio.play()\r\n  console.log(audio)\r\n  // context.me.muted = false;\r\n                // context.me.play();\r\n  // context.me.autoplay = true;\r\n}\r\n\r\nasync function setAudioUrl(videoId, context){\r\n\r\n  // let info = await ytdl.getInfo(videoId);\r\n  // console.log(info)\r\n  // let format = ytdl.chooseFormat(info.formats, { quality: 'lowestaudio' });\r\n  // console.log('Format found!', format);\r\n\r\n  // console.log(format?.url)\r\n  // context.me.src = format?.url;\r\n  // // context.me.autoplay = true;\r\n  // context.me.play()\r\n\r\n\r\n   await fetch(`${process.env.REACT_APP_API_BASE_URL}/api/ytdl/download-video-ytdl-player3?videoId=${videoId}`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      videoId: videoId,\r\n    }),\r\n  })\r\n  .then(res => {\r\n    return res.text().then(audioUrl => {\r\n        console.log(audioUrl)\r\n        context.me.src = audioUrl;\r\n      })\r\n      \r\n      // return audioUrl;\r\n      // context.me.autoplay = true;\r\n      //context.me.play()\r\n    \r\n  })\r\n  // await fetch(`${process.env.REACT_APP_API_BASE_URL}/api/ytdl/download-video-ytdl-player3?videoId=${videoId}`, {\r\n  //   method: 'POST',\r\n  //   headers: {\r\n  //     'Content-Type': 'application/json'\r\n  //   },\r\n  //   body: JSON.stringify({\r\n  //     videoId: videoId,\r\n  //   }),\r\n  // })\r\n  // .then(res => {\r\n  //   res.text().then(audioUrl => {\r\n  //     console.log(audioUrl)\r\n  //     context.me.src = audioUrl;\r\n  //     // context.me.autoplay = true;\r\n  //     context.me.play()\r\n  //   })\r\n  // })\r\n    \r\n    // context.me.addEventListener(\"load\", function() { \r\n    //   context.me.play(); \r\n    // }, true);\r\n    \r\n}\r\n\r\nasync function getVideoInfo(videoId){\r\n    \r\n  let response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/api/ytdl/search-by-id`, {\r\n    //'http://192.168.0.103:3003/api/get-video-details', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      // url : 'https://www.youtube.com/watch?v=7G7umMPwlO4',\r\n      videoId: videoId,\r\n    }),\r\n  });\r\n\r\n  return await response.json()\r\n}\r\n\r\nfunction getMIMEType(extension, codecs){\r\n  switch(extension){\r\n    case 'webm' : return `audio/${extension};codecs=${codecs}`;\r\n    case 'm4a' : return `audio/mp4;codecs=${codecs}`;\r\n    default : return `audio/webm;codecs=opus`;\r\n  }\r\n}\r\n\r\nasync function onSourceOpen(videoId, context){\r\n  context.me.src = URL.createObjectURL(context?.mediaSource)\r\n  let res = await getVideoInfo(videoId)\r\n  console.log(res)\r\n\r\n  //console.log(\"sourceopen\")\r\n  fetch(`${process.env.REACT_APP_API_BASE_URL}/api/ytdl/download-video-ytdl-player1`, {\r\n    // 'http://192.168.0.103:3003/api/download-video-parts', {\r\n  method: 'POST',\r\n  headers: {\r\n    'Accept': 'application/json',\r\n    'Content-Type': 'application/json'\r\n  },\r\n  body: JSON.stringify({\r\n    // videoUrl:  res.url,\r\n    videoUrl: \"https://www.youtube.com/watch?v=\" + videoId\r\n  }),\r\n})\r\n.then(async (response) => {\r\n  let reader = response.body.getReader();\r\n  let chunks = [];\r\n  let sourceBuffer = context.mediaSource.addSourceBuffer(this.getMIMEType(res.ext, res.acodec))\r\n  // let sourceBuffer = mediaSource.addSourceBuffer('audio/webm;codecs=opus')\r\n  let result;\r\n  sourceBuffer.mode = 'sequence';\r\n\r\n  while(!result?.done) {\r\n  //   const {done, value} = await reader.read();\r\n    result = await reader.read();\r\n    // If it's done, there will be no value\r\n\r\n    chunks.push(result?.value?.buffer);\r\n    if((sourceBuffer != null || undefined) && chunks.length > 0 && !sourceBuffer.updating && (chunks[0] != null || undefined)){\r\n\r\n          if (context.mediaSource?.sourceBuffers[0] != null || undefined){\r\n              try{\r\n                  sourceBuffer?.appendBuffer(chunks.shift())\r\n              }\r\n              catch(e){\r\n                  // console.log(e)\r\n              }\r\n              \r\n          }\r\n      // }\r\n      // setLoading(false)\r\n    //   dispatch({type: \"setAudioState\", snippet: {\r\n    //     audioState: \"loaded\"\r\n    // }});\r\n       \r\n    }\r\n\r\n    if (result?.done) {\r\n\r\n      console.log(\"Fetch Data Complete..\")\r\n      sourceBuffer.addEventListener('updateend', function (){\r\n        if (!sourceBuffer.updating && context.mediaSource.readyState === 'open') {  \r\n          if(chunks.length > 0 && !sourceBuffer.updating && (chunks[0] != null || undefined)){\r\n            console.log(\"Remaining chunks =>\", chunks.length)\r\n            console.log(chunks)\r\n            console.log(sourceBuffer.updating)\r\n            if (sourceBuffer !== undefined){\r\n            sourceBuffer.appendBuffer(chunks.shift())\r\n            }\r\n        }\r\n        else if (sourceBuffer != null && ((chunks[0] == null || undefined) || chunks.length <=0) && !sourceBuffer.updating){\r\n          console.log(\"stream end\")\r\n          context.mediaSource.endOfStream(); \r\n        }        \r\n        }\r\n      })\r\n      break;\r\n    }\r\n  }\r\n  return chunks\r\n})\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default PlayerService","import React, { useReducer } from 'react';\r\nimport PlayerService from '../services/PlayerService';\r\n\r\nexport const AppContext = React.createContext(null);\r\n\r\nvar store = {\r\n    me: document.createElement('audio'),\r\n    mediaSource: new MediaSource(),\r\n    sourceBuffer: null,\r\n    searchResult: null,\r\n    relatedVideos: null,\r\n    menuOpen: false,\r\n    snackbarMsg: false,\r\n    themeSelectValue: \"Default\",\r\n    currentSongDetails: {},\r\n    testProp: {},\r\n    audioState: \"paused\",\r\n    bufferState: \"loading\",\r\n    playerState: null,\r\n    relatedVideoSourceId: \"\",\r\n    searchKey: \"\",\r\n    previousTrack: {},\r\n    nextTrack:{},\r\n    nextTrackId: \"\",\r\n    trendingSongs: null,\r\n    pickedSongs: null,\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n    switch (action.type){\r\n        case \"setCurrentSong\":\r\n            return{\r\n                ...state,\r\n                currentSongDetails: action.snippet\r\n            };\r\n        \r\n        case \"setRelatedVideos\": \r\n            return {\r\n                ...state,\r\n                relatedVideos: action.snippet\r\n            };\r\n        \r\n        case \"setThemeSelectValue\":\r\n            return {\r\n                ...state,\r\n                themeSelectValue: action.snippet\r\n            };\r\n        case \"setAudioState\":\r\n            PlayerService.setPlayButton(store.me, action.snippet);\r\n            return {\r\n                ...state,\r\n                audioState: action.snippet\r\n            };\r\n        case \"setBufferState\":\r\n            return {\r\n                ...state,\r\n                bufferState: action.snippet\r\n            };\r\n        case \"setPlayerState\":\r\n            return {\r\n                ...state,\r\n                playerState: action.snippet\r\n            };\r\n\r\n        case \"setRelatedVideoSourceId\":\r\n            return {\r\n                ...state,\r\n                relatedVideoSourceId: action.snippet\r\n            };\r\n        case \"setSearchKeyValue\":\r\n            return {\r\n                ...state,\r\n                searchKey: action.snippet\r\n            };\r\n        case \"setSearchResult\":\r\n            return{\r\n                ...state,\r\n                searchResult: action.snippet\r\n            };\r\n        case \"setNextSong\":\r\n            return{\r\n                ...state,\r\n                nextTrack: action.snippet\r\n            };\r\n        case \"setPreviousSong\":\r\n            return{\r\n                ...state,\r\n                previousTrack: action.snippet\r\n            };\r\n        case \"setNextTrackId\":\r\n            return {\r\n                ...state,\r\n                nextTrackId: action.snippet\r\n            };\r\n        case \"setTrendingSongs\":\r\n            return {\r\n                ...state,\r\n                trendingSongs: action.snippet\r\n            };\r\n        case \"setPickedSongs\":\r\n            return {\r\n                ...state,\r\n                pickedSongs: action.snippet\r\n            };\r\n\r\n\r\n        case \"setStore\":\r\n            return action.snippet;\r\n        \r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const ContextWrapper = (props) => {\r\n\t\r\n\t// const [ actions, setActions ] = useState({\r\n\t// \taddSource: mimeType => setStore({ ...store, sourceBuffer: store.mediaSource.addSourceBuffer(mimeType) }),\r\n\r\n    //     addTrackDetails: details => setStore({ ...store, trackDetails: details}),\r\n\r\n    //     addTestprop: prop => setStore({ ...store, testProp: prop})\r\n\r\n\t// });\r\n\t\r\n    const globalStore = useReducer(reducer, store);\r\n\r\n\treturn (\r\n\t\t<AppContext.Provider value={ globalStore }>\r\n\t\t\t{props.children}\r\n\t\t</AppContext.Provider>\r\n\t);\r\n}","import React, { useContext, useEffect } from 'react'\r\nimport { AppContext } from '../../context/AppContext'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {Link} from 'react-router-dom'\r\nimport './MiniPlayer.css';\r\nimport PlayerService from '../../services/PlayerService';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nexport default function MiniPlayer() {\r\n\r\n    // const context = useContext(AppContext)\r\n    const [context, dispatch] = useContext(AppContext);\r\n    const history = useHistory()\r\n\r\n    useEffect(() => {\r\n        // console.log(context)\r\n    }, [context.currentSongDetails])\r\n    \r\n    function playAudio(e){\r\n        e.stopPropagation()\r\n        if (context.audioState === \"playing\"){\r\n            //  setIsPlaying(false);\r\n             context.me.pause();\r\n            //  span.innerHTML = 'play_arrow'\r\n             dispatch({type: \"setAudioState\", snippet: \"paused\"})\r\n           }\r\n           else if(context.audioState === \"paused\"){\r\n            //  setIsPlaying(true);\r\n             context.me.play()\r\n            //  span.innerHTML = 'pause'\r\n             dispatch({type: \"setAudioState\", snippet: \"playing\"})\r\n           }\r\n           else if(context.audioState === \"error\"){\r\n            dispatch({type: \"setAudioState\", snippet: \"error\"})\r\n           }\r\n    }\r\n\r\n    function setPlayerApperance(e){\r\n        PlayerService.setPlayerApperance(e, \"max\")\r\n        setTimeout(() => {\r\n            dispatch({type: \"setPlayerState\", snippet: \"max\"});\r\n            history.push(`/player1/${context?.currentSongDetails?.videoId}`)}\r\n            , 200); \r\n    }\r\n\r\n    function openPlayer(e){\r\n        e.preventDefault()\r\n        // console.log(document.getElementsByClassName(\"mini-player\")[0])\r\n        // document.getElementsByClassName(\"mini-player\")[0].style.height = '50vh'\r\n        // document.getElementsByClassName(\"mini-player\")[0].style.transform = 'translateY(calc(-300%))'\r\n        dispatch({type: \"setCurrentSong\", snippet: {\r\n            videoId: context?.currentSongDetails?.videoId,\r\n            trackTitle: context?.currentSongDetails?.trackTitle,\r\n            albumArtUrl: context?.currentSongDetails?.albumArtUrl,\r\n        }})\r\n        //dispatch({type: \"setPlayerState\", snippet: \"max\"})\r\n        setPlayerApperance(e)\r\n    }\r\n\r\n    function setPlayButton(){\r\n        switch(context.audioState){\r\n          case \"paused\":\r\n            return \"play_arrow\"\r\n          case \"playing\":\r\n            return \"pause\"\r\n          case \"error\":\r\n            return \"music_off\"\r\n          default:\r\n            return \"play_arrow\"\r\n        }\r\n      }\r\n\r\n    return (\r\n        <div className=\"mini-player\" onClick={(e) => {openPlayer(e)}}>\r\n            {/* <div className=\"main-container\"> */}\r\n                <div class=\"album-art image-box\">\r\n                    <img src={context?.currentSongDetails?.albumArtUrl} alt=\"album art\" />\r\n                </div>\r\n            \r\n                {/* <div className=\"album-art\"> */}\r\n                    {/* <img src=\"https://i.ytimg.com/vi/rpIlP6pI8fo/hqdefault.jpg?sqp=-oaymwEiCKgBEF5IWvKriqkDFQgBFQAAAAAYASUAAMhCPQCAokN4AQ==&rs=AOn4CLC3RB_yAndw0DHdAadz4bl1wNC12w\"/> */}\r\n                    {/* <img src={context?.currentSongDetails?.albumArtUrl} />  */}\r\n                {/* </div> */}\r\n                \r\n                <div id=\"scroll-container\">\r\n                    <div id=\"scroll-text\">{context?.currentSongDetails?.trackTitle}</div>\r\n                </div>\r\n                {/* <div className=\"title\">\r\n                    {\r\n                    <Link  to= \r\n                    {{\r\n                        pathname :`/player1/${context.currentSongDetails?.videoId}`,\r\n                        // state : {\r\n                        //     albumArtUrl: r?.thumbnails[0].url,\r\n                        //     videoId: r?.videoId,\r\n                        //     title: r?.title\r\n                        // }\r\n                    }}>\r\n                        }\r\n                    <h4>{context.currentSongDetails?.trackTitle}</h4>\r\n                    {/* </Link> \r\n                    </div> */}\r\n                {context.bufferState === \"loading\" ?\r\n                <div><CircularProgress /></div> :\r\n                <div style={{\"display\": \"flex\", \"justifyContent\": \"center\", \"flexDirection\": \"column\" }}>\r\n                <button onClick={(e) => {playAudio(e)}}>\r\n                    <span className=\"material-icons\">{setPlayButton()}</span>\r\n                    </button>\r\n                </div>\r\n                }       \r\n            {/* </div> */}\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { useEffect, useState, useContext} from 'react';\r\nimport './RelatedVideos.css';\r\nimport {Link} from 'react-router-dom'\r\nimport { AppContext } from '../../context/AppContext';\r\nimport { Accordion, CircularProgress } from '@material-ui/core';\r\nimport PlayerService from '../../services/PlayerService';\r\n\r\nfunction RelatedVideos(props){\r\n\r\n    const [relatedVideos, setRelatedVideos] = useState();\r\n    const [toggleAccordian, setToggleAccordian] = useState(true);\r\n    const [context, dispatch] = useContext(AppContext);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n      if (context.relatedVideoSourceId !== context.currentSongDetails?.videoId){\r\n        console.log(\"related videos effect\")\r\n        setLoading(true);\r\n        getRelatedVideos(context.currentSongDetails?.videoId)\r\n        .then(async (res) => {\r\n            let videos = await res.json();\r\n            dispatch({type: \"setRelatedVideos\", snippet: videos});\r\n            dispatch({type: \"setNextTrackId\", snippet: videos[0]?.videoId});\r\n            dispatch({type: \"setNextTrack\", snippet: {\r\n              videoId: videos[0]?.videoId,\r\n              trackTitle: videos[0]?.title,\r\n              albumArtUrl: videos[0]?.thumbnails.at(-1).url,\r\n            }});\r\n            dispatch({type: \"setRelatedVideoSourceId\", snippet: context.currentSongDetails?.videoId});\r\n            setRelatedVideos([...videos]);\r\n            setLoading(false);\r\n        })\r\n      }\r\n      else{\r\n        setRelatedVideos(context.relatedVideos);\r\n      }\r\n      \r\n    }, [context.currentSongDetails?.videoId])\r\n\r\n    function getRelatedVideos(videoId){\r\n        return fetch(`${process.env.REACT_APP_API_BASE_URL}/api/ytdl/related-videos?videoId=${videoId}`, {\r\n          //`http://192.168.0.103:3003/api/related-videos?videoId=${videoId}`, {\r\n          headers: {\r\n            \"Accept\": \"application/json\",\r\n            'Content-Type': 'application/json',\r\n            'Access-Control-Allow-Origin': '*'\r\n          },\r\n        });\r\n    }\r\n\r\n    function trackChange(r){\r\n        console.log(\"track change cleanup\")\r\n\r\n    //   mediaSource.endOfStream()\r\n      console.log(context.mediaSource?.sourceBuffers[0])\r\n    //   mediaSource?.sourceBuffers[0].abort();\r\n      try{\r\n        context.mediaSource.removeSourceBuffer(context.store.mediaSource?.sourceBuffers[0]);\r\n      console.log(context.mediaSource?.sourceBuffers[0])\r\n      }\r\n\r\n      catch(e){\r\n        //   console.log(e)\r\n      }\r\n\r\n      dispatch({type: \"setBufferState\", snippet: \"loading\"})\r\n      dispatch({type: \"setCurrentSong\", snippet: {\r\n        videoId: r?.videoId,\r\n        trackTitle: r?.title,\r\n        albumArtUrl: r?.thumbnails.at(-1).url,\r\n    }})\r\n\r\n      if (document.getElementById(\"buffered-amount\") != null || undefined)\r\n        document.getElementById(\"buffered-amount\").style.width = \"0%\";\r\n\r\n      if(document.getElementById(\"progress-amount\") != null || undefined)\r\n        document.getElementById(\"progress-amount\").style.width = \"0px\";\r\n\r\n     if(document.getElementById(\"progress-scrub\") != null || undefined)\r\n        document.getElementById(\"progress-scrub\").style.left = \"0px\";\r\n\r\n      context.me.removeAttribute('src');\r\n      context.me.load();\r\n\r\n      \r\n      setAudioSource(r?.videoId).then(() => {\r\n        console.log(\"track loaded\")\r\n        dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n      })\r\n\r\n      //setSource(context.currentSongDetails?.videoId);\r\n      // setSource(r?.videoId).then(() => {\r\n      //   console.log(\"track loaded\")\r\n      //   dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n      // })\r\n    }\r\n\r\n    async function setAudioSource(videoId){\r\n      // await PlayerService.setAudioSource(videoId, context); //Player 2\r\n      await PlayerService.setAudioUrl(videoId, context); //Player 3\r\n  }\r\n    async function setSource(videoId){\r\n      await PlayerService.setSource(videoId, context);\r\n  }\r\n\r\n  function openRelatedVideos(e){\r\n    e.preventDefault()\r\n    setToggleAccordian(!toggleAccordian)\r\n    if (toggleAccordian)\r\n      document.getElementsByClassName(\"relatedVideosContainer\")[0].style.height = '50vh'\r\n    else\r\n    document.getElementsByClassName(\"relatedVideosContainer\")[0].style.height = '0vh'\r\n    //     document.getElementsByClassName(\"relatedVideosContainer\")[0].style.transform = 'translateY(calc(-100%))'\r\n  }\r\n\r\n    return(\r\n        <div className=\"relatedVideos\">\r\n        <div className=\"accordian-header\" onClick={(e) => openRelatedVideos(e)}>\r\n          <p style={{\"width\": \"200%\", fontSize: \"18px\"}}><b>Related Songs</b></p>\r\n          <i className=\"material-icons\">{toggleAccordian ? 'keyboard_arrow_up' : 'keyboard_arrow_down'}</i>\r\n          </div>\r\n        \r\n        <div className=\"relatedVideosContainer\">{ \r\n          loading ? <CircularProgress /> :\r\n            relatedVideos?.map((r) =>{\r\n                // console.log(r?.snippet?.thumbnails)\r\n                return(\r\n                // <li key={r?.id?.videoId}>\r\n                  <div key={r?.videoId} className=\"related-list-item\">\r\n                    <Link className=\"related-list-item-detail\" onClick={() => {trackChange(r)}} to= \r\n                    {{\r\n                        pathname :`/player1/${r?.videoId}`,\r\n                        // state : {\r\n                        //     albumArtUrl: r?.thumbnails[0].url,\r\n                        //     videoId: r?.videoId,\r\n                        //     title: r?.title\r\n                        // }\r\n                    }}>\r\n                        {/* <div className=\"list-item\"> */}\r\n                    <img alt='' src={r?.thumbnails.at(-1).url}></img>\r\n                    <div>\r\n                    {r?.title}  \r\n                    </div>\r\n                        {/* </div> */}\r\n                    </Link>\r\n                  </div>\r\n                );\r\n            })\r\n            }</div>\r\n            </div>\r\n    );\r\n\r\n}\r\n\r\nexport default RelatedVideos;","import React, { useContext, useEffect, useState } from 'react'\r\nimport { AppContext } from '../../context/AppContext'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {Link} from 'react-router-dom'\r\nimport './SeekBar.css';\r\nimport PlayerService from '../../services/PlayerService';\r\n\r\nexport default function SeekBar() {\r\n\r\n    const [context, dispatch] = useContext(AppContext);\r\n    const [mousedownFired, setMouseDownFired] = useState(false);\r\n    var me = context.me;\r\n    const history = useHistory()\r\n\r\n    useEffect(() => {\r\n        // console.log(context)\r\n        me?.addEventListener('progress',  progress);\r\n        progress();\r\n        me?.addEventListener('timeupdate', timeupdate);\r\n        timeupdate();\r\n        document.getElementById('seekBar').addEventListener('mouseover', (e) =>{\r\n            document.getElementById(\"progress-scrub\").style.display = 'block'\r\n        })\r\n\r\n        document.getElementById('seekBar').addEventListener('mouseout', (e) =>{\r\n            document.getElementById(\"progress-scrub\").style.display = 'none'\r\n        })\r\n\r\n        return () => {\r\n\r\n            me?.removeEventListener('progress', progress);\r\n            me?.removeEventListener('timeupdate', timeupdate);\r\n            // document.getElementById('seekBar').removeEventListener('mouseover')\r\n            // document.getElementById('seekBar').removeEventListener('mouseout')\r\n            // dispatch({type: \"setPlayerState\", snippet: \"min\"})\r\n          }\r\n    }, [])\r\n\r\n    function progress(){\r\n        console.log('add to buffer')\r\n        var duration =  me.duration;\r\n        if (me.duration > 0) {\r\n          for (var i = 0; i < me.buffered.length; i++) {\r\n                if (me.buffered.start(me.buffered.length - 1 - i) < me.currentTime) {\r\n                    document.getElementById(\"buffered-amount\").style.width = (me.buffered.end(me.buffered.length - 1 - i) / duration) * 100 + \"%\";\r\n                    // me.play()\r\n                    // console.clear()\r\n                    console.log(\"Buffering =>\" ,((me.buffered.end(me.buffered.length - 1 - i) / me.duration) * 100).toFixed(0) + \"%\")\r\n                    // break;\r\n                }\r\n            }\r\n        }\r\n       }\r\n\r\n       function timeupdate(){\r\n        var duration =  me.duration;\r\n        if (duration > 0) {\r\n          document.getElementById('progress-amount').style.width = ((me.currentTime / duration)*100) + \"%\";\r\n          document.getElementById('progress-scrub').style.left = (me.currentTime / duration)*100 + \"%\";\r\n        }\r\n       }\r\n\r\n    function moveThumb(e){\r\n        e.preventDefault();\r\n       if (mousedownFired) {\r\n         setMouseDownFired(false);\r\n         return;\r\n       }\r\n       console.log(\"click\")\r\n       me.pause()\r\n       \r\n       console.log(document.getElementById('progress-scrub').offsetWidth)\r\n      \r\n       // let shiftX = e.clientX - document.getElementById('progress-scrub').getBoundingClientRect().left;\r\n       let newLeft = e.clientX - document.getElementById('seekBar').getBoundingClientRect().left;\r\n      \r\n             // the pointer is out of slider => lock the thumb within the bounaries\r\n             if (newLeft < 0) {\r\n               newLeft = 0;\r\n             }\r\n             let rightEdge = document.getElementById('seekBar').offsetWidth + document.getElementById('progress-scrub').offsetWidth;\r\n             if (newLeft > rightEdge) {\r\n               newLeft = rightEdge;\r\n             }\r\n      \r\n             document.getElementById('progress-scrub').style.left = newLeft + 'px';\r\n             document.getElementById('progress-amount').style.width = newLeft + 'px';\r\n             console.log(me.duration)\r\n             console.log((newLeft/document.getElementById('seekBar').clientWidth) *me.duration)\r\n             \r\n      \r\n             me.currentTime = (newLeft/document.getElementById('seekBar').clientWidth) *me.duration;\r\n             if(context.audioState === \"playing\"){\r\n               me.play()\r\n             }\r\n      }\r\n  \r\n       \r\n    function onMouseDown(e){\r\n        console.log(\"md\")\r\n        if (context.audioState === \"playing\"){\r\n        me.pause()\r\n        // setIsPlaying(false)\r\n        }\r\n        // me.pause()\r\n        // e.stopPropagation();\r\n        e.preventDefault(); // prevent selection start (browser action)\r\n        \r\n        let shiftX = e.clientX - document.getElementById('progress-scrub').getBoundingClientRect().left;\r\n        // shiftY not needed, the thumb moves only horizontally\r\n    \r\n        document.addEventListener('mousemove', onMouseMove);\r\n        document.addEventListener('mouseup', onMouseUp);\r\n    \r\n        function onMouseMove(event) {\r\n            let newLeft = event.clientX - shiftX - document.getElementById('seekBar').getBoundingClientRect().left;\r\n    \r\n            // the pointer is out of slider => lock the thumb within the bounaries\r\n            if (newLeft < 0) {\r\n            newLeft = 0;\r\n            }\r\n            let rightEdge = document.getElementById('seekBar').offsetWidth + document.getElementById('progress-scrub').offsetWidth;\r\n            if (newLeft > rightEdge) {\r\n            newLeft = rightEdge;\r\n            }\r\n    \r\n            document.getElementById('progress-scrub').style.left = newLeft + 'px';\r\n            document.getElementById('progress-amount').style.width = newLeft + 'px';\r\n            console.log(document.getElementById('seekBar').offsetWidth)\r\n            me.currentTime = (newLeft/document.getElementById('seekBar').offsetWidth) *me.duration;\r\n        }\r\n    \r\n        function onMouseUp() {\r\n            console.log(\"mup\");\r\n            setMouseDownFired(true);\r\n            if(context.audioState === \"playing\"){\r\n            me.play();\r\n            }\r\n            \r\n            document.removeEventListener('mouseup', onMouseUp);\r\n            document.removeEventListener('mousemove', onMouseMove);\r\n        }\r\n        \r\n    }\r\n\r\n    return (\r\n        <div id=\"seekBar\" className=\"seekBar\" onClick={moveThumb}>\r\n            <span id=\"buffered-amount\"></span>\r\n            <div id=\"progress-amount\"></div>\r\n            <div onDragStart={() => false} onTouchStart={onMouseDown} onMouseDown={onMouseDown} id=\"progress-scrub\"></div>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport { useEffect, useState, useContext} from 'react';\r\nimport './Player2.css';\r\nimport {useParams, useHistory} from 'react-router-dom'\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { AppContext } from '../../context/AppContext';\r\nimport PlayerService from '../../services/PlayerService';\r\nimport SeekBar from '../SeekBar/SeekBar';\r\nimport { IconButton } from '@material-ui/core';\r\n\r\n\r\nfunction Player2() {\r\n  const { videoId } = useParams();\r\n  const history = useHistory();\r\n  //var me = document.createElement('audio');\r\n  //var mediaSource\r\n    // console.log(props);\r\n    const [context, dispatch] = useContext(AppContext)\r\n    var me = context.me;\r\n    const [loading, setLoading] = useState(false);\r\n    const [songDuration, setSongDuration] = useState(0);\r\n    const [seekbarDuration, setSeekbarDuration] = useState(0);\r\n    // const [dm, setdm] = \r\n    // const [ds, setds] = useState(0);\r\n    // const [cm, setcm] = useState(0);\r\n    // const [cs, setcs] = useState(0);\r\n    \r\n    useEffect(() => {\r\n        window.onpopstate = () =>{\r\n            history.push(\"/\");\r\n        }\r\n    })\r\n   \r\n    useEffect(() => {\r\n      // setLoading(true)\r\n      console.log('use effect')\r\n      console.log(videoId)\r\n      //document.getElementsByTagName('audio').src = `${process.env.REACT_APP_API_BASE_URL}/download-video-ytdl-tester?path=https://www.youtube.com/watch?v=${videoId}`\r\n      console.log(console.log(context.currentSongDetails))\r\n      console.log(Object.keys(context.currentSongDetails).length)\r\n      if (Object.keys(context.currentSongDetails).length == 0)\r\n      {\r\n        dispatch({type: \"setBufferState\", snippet: \"loading\"})\r\n\r\n        PlayerService.getVideoInfo(videoId).then((r) => {\r\n\r\n          console.log(r?.thumbnails[r?.thumbnails?.length - 1]?.url)\r\n          dispatch({type: \"setCurrentSong\", snippet: {\r\n            videoId: videoId,\r\n            trackTitle: r?.title,\r\n            albumArtUrl: r?.thumbnails[r?.thumbnails?.length - 1]?.url,\r\n        }});\r\n        PlayerService.setAudioSource(videoId, context).then(() => {\r\n              \r\n              // fetch(context.me.src).then(() => {\r\n                // dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n                // setLoading(true);\r\n                context.me.muted = false;\r\n              // })\r\n              // .catch(err => {\r\n              //   dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n              //   dispatch({type: \"setAudioState\", snippet: \"error\"})\r\n              // })\r\n              \r\n        })\r\n      });\r\n      }\r\n\r\n\r\n      me?.addEventListener('loadedmetadata', loadedmetadata);\r\n      me?.addEventListener('progress',  progress);\r\n      me?.addEventListener('timeupdate', timeupdate);\r\n      // document.body.addEventListener('mouseover', () => {\r\n      //   context.me.muted = false;\r\n      // });\r\n\r\n      PlayerService.setNotificationLabel(context?.currentSongDetails);\r\n      setSeekbarDuration(me?.currentTime);\r\n      setSongDuration(me?.duration);\r\n      dispatch({type: \"setPlayerState\", snippet: \"max\"})\r\n\r\n      // Clean Up\r\n    return () => {\r\n\r\n      me?.removeEventListener('progress', progress);\r\n      me?.removeEventListener('timeupdate', timeupdate);\r\n      dispatch({type: \"setPlayerState\", snippet: \"min\"})\r\n     \r\n    }\r\n   }, [context.currentSongDetails]);\r\n  \r\n\r\n   function playAudio(e){\r\n    e.preventDefault();\r\n\r\n    console.log(context.audioState)\r\n\r\n    switch(context.audioState){\r\n      case \"playing\":\r\n        dispatch({type: \"setAudioState\", snippet: \"paused\"})\r\n        break;\r\n      case \"paused\":\r\n        dispatch({type: \"setAudioState\", snippet: \"playing\"})\r\n        break;\r\n      case \"error\":\r\n        dispatch({type: \"setAudioState\", snippet: \"error\"})\r\n        break;\r\n\r\n    }\r\n  }\r\n   \r\n   function loadedmetadata(){\r\n    // console.log(\"loadmetadata\")\r\n    setSongDuration(me.duration)\r\n    // setdm(parseInt((me.duration / 60) % 60))\r\n\r\n    if(me.duration > 0){\r\n      setSeekbarDuration(me.currentTime)\r\n      // setcm(parseInt((me.currentTime / 60) % 60))\r\n    }\r\n    // setLoading(false)\r\n    // dispatch({type: \"setAudioState\", snippet: \"playing\"})\r\n    \r\n   }\r\n\r\n   function progress(){\r\n    // console.log(\"progress\")\r\n    console.log('add to buffer')\r\n    // setLoading(false)\r\n    dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n    \r\n    \r\n    context.me.play().then(() =>{\r\n      dispatch({type: \"setAudioState\", snippet: \"playing\"})\r\n    }).catch((error) => {\r\n      // Auto-play was prevented\r\n      // Show paused UI.\r\n      // console.log(\"playback prevented\");\r\n      dispatch({type: \"setAudioState\", snippet: \"paused\"})\r\n    });\r\n\r\n    var duration =  me.duration;\r\n    \r\n    if (me.duration > 0) {\r\n      for (var i = 0; i < me.buffered.length; i++) {\r\n            if (me.buffered.start(me.buffered.length - 1 - i) < me.currentTime) {\r\n                //document.getElementById(\"buffered-amount\").style.width = (me.buffered.end(me.buffered.length - 1 - i) / duration) * 100 + \"%\";\r\n                // me.play()\r\n                // console.clear()\r\n                console.log(\"Buffering =>\" ,((me.buffered.end(me.buffered.length - 1 - i) / me.duration) * 100).toFixed(0) + \"%\")\r\n                // break;\r\n            }\r\n        }\r\n    }\r\n   }\r\n\r\n   function timeupdate(){\r\n    // console.log(\"timeupdate\")\r\n    var duration =  me.duration;\r\n    setSongDuration(me.duration)\r\n    // setdm(parseInt((me.duration / 60) % 60))\r\n\r\n    if (duration > 0) {\r\n      setSeekbarDuration(me.currentTime)\r\n      // setcm(parseInt((me.currentTime / 60) % 60))\r\n      //document.getElementById('progress-amount').style.width = ((me.currentTime / duration)*100) + \"%\";\r\n      //document.getElementById('progress-scrub').style.left = (me.currentTime / duration)*100 + \"%\";\r\n    }\r\n   }\r\n\r\n   function setNotificationLabel(){\r\n\r\n    if ('mediaSession' in navigator) {\r\n      console.log(\"media session works\")\r\n    navigator.mediaSession.metadata = new window.MediaMetadata({\r\n      title: context.currentSongDetails.trackTitle,\r\n      artwork: [\r\n        {\r\n          src: context.currentSongDetails.albumArtUrl == null || undefined ? '' : context.currentSongDetails.albumArtUrl,\r\n          sizes: '512x512',\r\n          type: 'image/png',\r\n        },\r\n      ],\r\n    })\r\n\r\n    navigator.mediaSession.setActionHandler('play', function() { dispatch({type: \"setAudioState\", snippet: \"playing\"}) });\r\n    navigator.mediaSession.setActionHandler('pause', function() { dispatch({type: \"setAudioState\", snippet: \"paused\"}) });\r\n  }\r\n   }\r\n    \r\n    \r\n    \r\n  function playAudio(e){\r\n    e.preventDefault();\r\n\r\n    console.log(context.audioState)\r\n\r\n    switch(context.audioState){\r\n      case \"playing\":\r\n        dispatch({type: \"setAudioState\", snippet: \"paused\"})\r\n        break;\r\n      case \"paused\":\r\n        dispatch({type: \"setAudioState\", snippet: \"playing\"})\r\n        break;\r\n      case \"error\":\r\n        dispatch({type: \"setAudioState\", snippet: \"error\"})\r\n        break;\r\n\r\n    }\r\n  }\r\n\r\n  function changeTrack(trackSelect){\r\n    //e.preventDefault();\r\n    console.log(trackSelect);\r\n    console.log(context.currentSongDetails)\r\n    switch(trackSelect){\r\n      case \"prev\":\r\n        dispatch({type: \"setBufferState\", snippet: \"loading\"})\r\n      dispatch({type: \"setCurrentSong\", snippet: context.currentSongDetails})\r\n\r\n      if (document.getElementById(\"buffered-amount\") != null || undefined)\r\n        document.getElementById(\"buffered-amount\").style.width = \"0%\";\r\n\r\n      if(document.getElementById(\"progress-amount\") != null || undefined)\r\n        document.getElementById(\"progress-amount\").style.width = \"0px\";\r\n\r\n     if(document.getElementById(\"progress-scrub\") != null || undefined)\r\n        document.getElementById(\"progress-scrub\").style.left = \"0px\";\r\n\r\n      context.me.removeAttribute('src');\r\n      context.me.load();\r\n\r\n      \r\n      PlayerService.setAudioUrl(context?.currentSongDetails?.videoId, context).then(() => {\r\n        console.log(\"track loaded\")\r\n        dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n      });\r\n\r\n        break;\r\n      case \"next\":\r\n        // dispatch({type: \"setBufferState\", snippet: \"loading\"})\r\n        // setTimeout(() => {\r\n        //   history.push(`/player1/${context?.nextTrackId}`)\r\n        //   history.go(0)\r\n        // }, 200)\r\n        dispatch({type: \"setAudioState\", snippet: \"paused\"})\r\n        dispatch({type: \"setBufferState\", snippet: \"loading\"})\r\n        PlayerService.getVideoInfo(context?.nextTrackId).then((r) => {\r\n\r\n          console.log(r?.thumbnails[r?.thumbnails?.length - 1]?.url)\r\n          dispatch({type: \"setCurrentSong\", snippet: {\r\n            videoId: context?.nextTrackId,\r\n            trackTitle: r?.title,\r\n            albumArtUrl: r?.thumbnails[r?.thumbnails?.length - 1]?.url,\r\n        }});\r\n        PlayerService.setAudioUrl(context?.nextTrackId, context).then(() => {\r\n              \r\n              fetch(context.me.src).then(() => {\r\n                dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n                context.me.play()\r\n                dispatch({type: \"setAudioState\", snippet: \"playing\"})\r\n              })\r\n              .catch(err => {\r\n                dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n                dispatch({type: \"setAudioState\", snippet: \"error\"})\r\n              })\r\n              \r\n        })\r\n      });\r\n        break;\r\n      default: break;\r\n    }\r\n\r\n  }\r\n\r\n \r\n\r\n    // function setPlayerState(e){\r\n    //   PlayerService.setPlayerApperance(e, \"min\")\r\n    //   dispatch({type: \"setPlayerState\", snippet: \"min\"});\r\n    //   setTimeout(() => history.push(\"/\"), 150);\r\n    // }\r\n \r\n\r\n  return (\r\n\r\n    <div className=\"playerContainer\">\r\n      \r\n      \r\n    {/* <div className=\"bgImg\" style={{backgroundImage: `url(${context?.currentSongDetails?.albumArtUrl})`}}></div> */}\r\n    <div className=\"Player\">\r\n        <div className=\"AlbumArt\" >\r\n            <img src={context?.currentSongDetails?.albumArtUrl} />\r\n        </div>\r\n        \r\n        <div className=\"scroll-container\">\r\n            <div id=\"scroll-text\">{context?.currentSongDetails?.trackTitle}</div>\r\n        </div>\r\n\r\n        {/* <div>\r\n        <h4> {context?.currentSongDetails?.trackTitle} </h4> \r\n        </div> */}\r\n        <SeekBar />\r\n        <div id=\"timeLine\">\r\n        <div>{loading ? \"0:00\" : parseInt((seekbarDuration / 60) % 60).toString() + \":\" +parseInt(seekbarDuration % 60).toLocaleString('en-US', {minimumIntegerDigits: 2, useGrouping:false})}</div>\r\n        <div>{loading ? \"0:00\" : parseInt((songDuration / 60) % 60).toString() + \":\" +parseInt(songDuration % 60).toLocaleString('en-US', {minimumIntegerDigits: 2, useGrouping:false})}</div>\r\n        </div>\r\n        {/* <div className=\"Seekbar\"> */}\r\n        {/* <audio controls crossOrigin=\"anonymous\" id=\"audio\">\r\n          <source id=\"source\">\r\n          </source>\r\n        </audio> */}\r\n        \r\n        {/* <Slider value={context.me?.currentTime} max={context.me?.duration} aria-labelledby=\"continuous-slider\" >\r\n        <span id=\"buffered-amount\"></span>\r\n          </Slider> */}\r\n          <div className='player-controls'>\r\n        { context.bufferState === \"loading\" ?\r\n          <div><CircularProgress /></div>\r\n        :\r\n          <div style={{'display' : 'flex', 'flexDirection': 'row', 'justifyContent': 'space-evenly', 'alignItems': 'center'}}>\r\n\r\n          <button onClick={() => {changeTrack(\"prev\")}}>\r\n          <span id=\"playbtn\" className=\"material-icons\">skip_previous</span>\r\n          </button>\r\n\r\n          <IconButton style={{'border' : 'solid', 'backgroundColor': 'salmon'}} onClick={playAudio}>\r\n          <span id=\"playbtn\" className=\"material-icons\">{\r\n            setPlayButton()\r\n          // context.audioState === \"paused\" ? \"play_arrow\" : \"pause\"\r\n          }</span>\r\n          </IconButton>\r\n          \r\n          <button onClick={() => {changeTrack(\"next\")}}>\r\n          <span id=\"playbtn\" className=\"material-icons\">skip_next</span>\r\n          </button>\r\n          </div>\r\n        }\r\n        </div>\r\n        \r\n        \r\n        \r\n        \r\n        \r\n    </div>\r\n    </div>\r\n\r\n\r\n\r\n  \r\n\r\n  );\r\n\r\n  function playerMinimize(){\r\n    document.getElementsByClassName('playerContainer')[0].style.transform = 'translateY(calc(100% - 106px))';\r\n    dispatch({type: \"setPlayerState\", snippet: \"min\"})\r\n  }\r\n\r\n  function setPlayButton(){\r\n    switch(context.audioState){\r\n      case \"paused\":\r\n        return \"play_arrow\"\r\n      case \"playing\":\r\n        return \"pause\"\r\n      case \"error\":\r\n        return \"music_off\"\r\n      default:\r\n        return \"play_arrow\"\r\n    }\r\n  }\r\n  \r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default Player2;","import React, { useContext, useEffect } from 'react';\r\nimport { AppContext } from '../../context/AppContext';\r\nimport './PlayerPage.css';\r\nimport RelatedVideos from '../../components/RelatedVideos/RelatedVideos';\r\n// import Player3 from '../../components/Player3/Player3';\r\nimport {Link, useHistory} from 'react-router-dom';\r\nimport PlayerService from '../../services/PlayerService';\r\nimport Player2 from '../../components/Player2/Player2';\r\nimport Player3 from '../../components/Player3/Player3';\r\n\r\n\r\nfunction PlayerPage(props){\r\n\r\n    const [context, dispatch] = useContext(AppContext);\r\n    const history = useHistory();\r\n    var xDown = null;                                                        \r\n    var yDown = null;\r\n\r\n    // console.log(props)\r\n\r\n    useEffect(() => {\r\n        // document.addEventListener('touchstart', handleTouchStart, false);        \r\n        // document.addEventListener('touchmove', handleTouchMove, false);\r\n        //document.addEventListener('touchend', handleTouchEnd, false); \r\n        \r\n        return ()=>{\r\n            // document.removeEventListener('touchstart', handleTouchStart, false);        \r\n            // document.removeEventListener('touchmove', handleTouchMove, false);\r\n            //document.removeEventListener('touchend', handleTouchEnd, false); \r\n        }\r\n    })\r\n\r\n    function setPlayerState(e){\r\n        PlayerService.setPlayerApperance(e, \"min\")\r\n        dispatch({type: \"setPlayerState\", snippet: \"min\"});\r\n        setTimeout(() => history.push(\"/\"), 150);\r\n      }\r\n\r\n      \r\n\r\n\r\n\r\nfunction getTouches(evt) {\r\n  return evt.touches ||             // browser API\r\n         evt.originalEvent.touches; // jQuery\r\n}                                                     \r\n                                                                         \r\nfunction handleTouchStart(evt) {\r\n    const firstTouch = getTouches(evt)[0];                                      \r\n    xDown = firstTouch.clientX;                                      \r\n    yDown = firstTouch.clientY;                                      \r\n};                                                \r\n                                                                         \r\nfunction handleTouchMove(evt) {\r\n    if ( ! xDown || ! yDown ) {\r\n        return;\r\n    }\r\n\r\n    var xUp = evt.touches[0].clientX;                                    \r\n    var yUp = evt.touches[0].clientY;\r\n\r\n    var xDiff = xDown - xUp;\r\n    var yDiff = yDown - yUp;\r\n                                                                         \r\n    if ( Math.abs( xDiff ) > Math.abs( yDiff ) ) {/*most significant*/\r\n        if ( xDiff > 0 ) {\r\n            /* right swipe */ \r\n        } else {\r\n            /* left swipe */\r\n        }                       \r\n    } else {\r\n        if ( yDiff > 0 ) {\r\n            /* down swipe */ \r\n            \r\n        } else { \r\n            /* up swipe */\r\n            console.log(\"down swipe\")\r\n            setPlayerState(evt)\r\n        }                                                                 \r\n    }\r\n    /* reset values */\r\n    xDown = null;\r\n    yDown = null;                                             \r\n};\r\n\r\nfunction handleTouchEnd(evt) {\r\n    const firstTouch = getTouches(evt)[0];                                      \r\n    xDown = firstTouch.clientX;                                      \r\n    yDown = firstTouch.clientY;                                      \r\n};  \r\n\r\n    return(\r\n        // <div>\r\n        <div className=\"PlayerPage\">\r\n            <button style={{ float: 'left'}} >\r\n            <Link onClick={(e) => {setPlayerState(e)}} style={{ textDecoration: 'none'}} to=\"/\" className=\"material-icons\">keyboard_arrow_down</Link>\r\n            </button>\r\n            {/* <Player1 props={props}/> */}\r\n            <Player2 props={props}/>\r\n            {/* <Player3 props={props}/> */}\r\n            {/* <br /> */}\r\n            <RelatedVideos props={props}/>\r\n        </div>\r\n        \r\n        // </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default PlayerPage;","import React, { useContext } from 'react';\r\nimport { useEffect, useState, useCallback} from 'react';\r\nimport './SearchPage.css';\r\nimport {Link, useHistory} from 'react-router-dom'\r\nimport _ from 'lodash'\r\nimport { AppContext } from '../../context/AppContext';\r\nimport PlayerService from '../../services/PlayerService';\r\nimport { CircularProgress } from '@material-ui/core';\r\n\r\nfunction SearchPage(){\r\n\r\n    \r\n    const [searchItems, setSearchItems] = useState();\r\n    const [input, setInput] = useState();\r\n    const [searchLoader, setSearchLoader] = useState(false);\r\n    const [searchKey, setSearchKey] = useState(\"\");\r\n    const [context, dispatch] = useContext(AppContext)\r\n    const history = useHistory();\r\n    // const inputRef = useRef();\r\n    // const [suggestItems, setSuggestItems] = useState();\r\n\r\n    useEffect(() =>{\r\n        console.log(\"mount search\")\r\n        console.log(context.searchKey)\r\n        if(context?.searchResult?.length > 0 && context?.searchResult !== undefined | null){\r\n            setSearchItems(context.searchResult)\r\n        }\r\n        setSearchKey(context.searchKey)\r\n\r\n        return () => {\r\n            console.log(\"unmount search\")\r\n            console.log(searchItems)\r\n            console.log(searchKey)\r\n            dispatch({type: \"setSearchKeyValue\", snippet: searchKey});\r\n            dispatch({type: \"setSearchResult\", snippet: searchItems});\r\n        }\r\n    }, [context?.searchKey])\r\n\r\n    const debouncedChangeHandler = useCallback( _.debounce(searchSong, 400)  , []);\r\n    \r\n    return (\r\n        <div>\r\n            <h3>Search</h3>\r\n            <input type=\"text\" placeholder=\"Type Song Name, Lyrics, Movie/Album/Singer Name\" onChange={debouncedChangeHandler}/>\r\n            \r\n            {/* <ul>{ \r\n            suggestItems?.map((r) =>{\r\n                return <li key={r?.id?.videoId}>{r?.title}</li>\r\n            })\r\n            }</ul> */}\r\n            <div className='search-result-container'>{ searchLoader ? <div style={{paddingTop: '50%' }}><CircularProgress /></div> :\r\n            searchItems?.map((r) =>{\r\n                // console.log(r?.snippet?.thumbnails)\r\n                return(\r\n                // <li key={r?.id?.videoId}>\r\n                <div className=\"list-item\">\r\n                    <Link className='list-item-link' onClick={ (e) => {selectSong(e, r)} } key={r?.id?.videoId} to={`/player1/${r?.id?.videoId}`}>\r\n                        <img alt='' src={r?.snippet?.thumbnails?.default?.url} />\r\n                        <div>\r\n                            {r?.title}  \r\n                         </div>\r\n                    </Link>\r\n                </div>\r\n                );\r\n                // return <li onClick={playSong} key={r?.id?.videoId}>{r?.title}</li>\r\n            })\r\n            }</div>\r\n            {/* {\r\n                searchItems == null || undefined ? null : <Player videoId={searchItems[0]?.id?.videoId} />\r\n            } */}\r\n            \r\n        </div>\r\n    );\r\n\r\n// function playSong(event)\r\n// {\r\n//     console.log(event.target)\r\n// }\r\n\r\nfunction openPlayer(r){\r\n    if (context.playerState == null | undefined){\r\n        dispatch({type: \"setPlayerState\", snippet: \"max\"});\r\n        dispatch({type: \"setSearchResult\", snippet: searchItems});\r\n        setTimeout(() => history.push(`/player1/${r?.id?.videoId}`), 150);\r\n    }\r\n    else if (context.playerState === \"min\" ){\r\n        dispatch({type: \"setSearchResult\", snippet: searchItems});\r\n        dispatch({type: \"setPlayerState\", snippet: \"min\"});\r\n    }\r\n    else if (context.playerState === \"max\" ){\r\n        dispatch({type: \"setPlayerState\", snippet: \"max\"});\r\n        dispatch({type: \"setSearchResult\", snippet: searchItems});\r\n        setTimeout(() => history.push(`/player1/${r?.id?.videoId}`), 150);\r\n    }\r\n}\r\n\r\n\r\nasync function selectSong(e, r){\r\n    e.preventDefault(); \r\n    context.me.removeAttribute('src');\r\n    context.me.load();\r\n    dispatch({type: \"setBufferState\", snippet: \"loading\"})\r\n    dispatch({type: \"setCurrentSong\", snippet: {\r\n        videoId: r?.id?.videoId,\r\n        trackTitle: r?.title,\r\n        albumArtUrl: r?.snippet?.thumbnails?.default?.url,\r\n    }});\r\n\r\n    // dispatch({type: \"setBufferState\", snippet: \"loading\"})\r\n\r\n    // setSource(r?.id?.videoId).then(() => {\r\n    //     console.log(\"track loaded\")\r\n    //     dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n    // })\r\n\r\n    setAudioSource(r?.id?.videoId).then(() => {\r\n        console.log(\"track loaded\")\r\n        dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n    })\r\n\r\n    openPlayer(r)\r\n    //await setSource(r?.id?.videoId);\r\n    \r\n}\r\n\r\n// async function setSource(videoId){\r\n//     await PlayerService.setSource(videoId, context);\r\n// }\r\n\r\nasync function setAudioSource(videoId){\r\n    // await PlayerService.setAudioSource(videoId, context); //Player 2\r\n    await PlayerService.setAudioUrl(videoId, context); //Player 3\r\n}\r\n\r\nfunction suggestSearch(event){\r\n    setSearchKey(event?.target?.value)\r\n    setSearchLoader(true);\r\n    console.log(event?.target?.value)\r\n\r\n}\r\nfunction searchSong(event){\r\n    setSearchKey(event?.target?.value)\r\n    setSearchLoader(true);\r\n    console.log(event?.target?.value)\r\n    setInput(event?.target?.value)\r\n    // inputRef.current(event?.target?.value)\r\n    fetch(`${process.env.REACT_APP_API_BASE_URL}/api/ytdl/search`, {\r\n        //'http://192.168.0.103:3003/api/search', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        searchKey : event?.target?.value\r\n      }),\r\n    })\r\n    .then(\r\n        async (res) => {\r\n            let response = await res.json()\r\n            console.log(response[0]?.id?.videoId)\r\n            setSearchItems([...response])\r\n            setSearchLoader(false)\r\n        }\r\n    )\r\n}\r\n}\r\n\r\nexport default SearchPage;","import React from 'react';\r\nimport './CardSlider.css';\r\nimport {Card, CardActionArea, CardMedia, Typography, CardContent} from '@material-ui/core'\r\nimport { useEffect, useState, useContext} from 'react';\r\nimport { AppContext } from '../../context/AppContext';\r\n\r\nfunction CardSlider({items, handleClick}){\r\n\r\n    const[cardItems, setCardItems] = useState();\r\n    const [context, dispatch] = useContext(AppContext);\r\n\r\n    useEffect(() => {\r\n          console.log(\"card slider effect\")\r\n        //   console.log(items)\r\n          setCardItems(items);\r\n      }, [items])\r\n\r\n    return(\r\n        <div className=\"silderContainer\">\r\n            {\r\n                \r\n            cardItems?.map((item) =>{\r\n                return (\r\n            <Card key={item?.videoId} style={{'display' : 'inline-block', 'whiteSpace': 'pre-line' ,'width': '50%', 'height': '30vh', 'margin': '2.5%'}} >\r\n            <CardActionArea onClick={(e) => {handleClick(e, {videoId: item?.videoId, title: item?.title, imageUrl: item?.imageUrl})}}>\r\n                <CardMedia\r\n                component=\"img\"\r\n                height=\"140\"\r\n                image={item?.imageUrl}\r\n                alt=\"album art\"\r\n                style={{objectFit: 'fill'}}\r\n                />\r\n                <CardContent>\r\n                    {item?.title}\r\n                </CardContent>\r\n            </CardActionArea>\r\n            </Card>\r\n        )})\r\n        }\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default CardSlider;","import React from 'react';\r\nimport { AppContext } from '../../context/AppContext';\r\nimport {Link, useHistory} from 'react-router-dom';\r\nimport './HomePage.css';\r\nimport CardSlider from '../../components/CardSlider/CardSlider';\r\nimport { useEffect, useState, useContext} from 'react';\r\nimport {Skeleton} from '@material-ui/lab';\r\nimport {Box} from '@material-ui/core'\r\nimport PlayerService from '../../services/PlayerService';\r\n\r\nfunction HomePage(props){\r\n\r\n    const [context, dispatch] = useContext(AppContext);\r\n    const history = useHistory();\r\n    const [trendingItems, setTrendingItems] = useState();\r\n    const [pickedItems, setPickedItems] = useState();\r\n\r\n    useEffect(() => {\r\n        console.log(\"home page effect\")\r\n        // console.log(context)\r\n        if ((context?.trendingSongs == null ) && (context?.pickedSongs == null )){\r\n        getSearchResult(\"trending songs\").then(\r\n            async (res) => {\r\n                \r\n                let response = await res.json()\r\n                // console.log(response)\r\n                \r\n                let filteredResponse = response.filter(i => convertDurationToNumber(i?.duration_raw) <= 10 * 60)\r\n                .map((val) => {\r\n                    return {\r\n                    imageUrl: val?.snippet?.thumbnails?.high?.url,\r\n                    title: val?.title,\r\n                    videoId: val?.id?.videoId\r\n                    }\r\n                });\r\n                setTrendingItems(filteredResponse)\r\n                \r\n                dispatch({type: \"setTrendingSongs\", snippet: filteredResponse})\r\n            })\r\n\r\n        getSearchResult(\"malayalam trending songs\").then(\r\n            async (res) => {\r\n                let response = await res.json()\r\n\r\n                let filteredResponse = response.filter(i => convertDurationToNumber(i?.duration_raw) <= 10 * 60)\r\n                .map((val) => {\r\n                    return {\r\n                    imageUrl: val?.snippet?.thumbnails?.high?.url,\r\n                    title: val?.title,\r\n                    videoId: val?.id?.videoId\r\n                    }\r\n                });\r\n                \r\n                setPickedItems(filteredResponse)\r\n                dispatch({type: \"setPickedSongs\", snippet: filteredResponse})\r\n            })\r\n        }\r\n        else{\r\n            setTrendingItems(context.trendingSongs)\r\n            setPickedItems(context.pickedSongs)\r\n        }\r\n    }, [])\r\n\r\n    const convertDurationToNumber = (duration) => {\r\n        let arr = duration?.split(\":\");\r\n        let seconds = 0;\r\n        switch(arr?.length){\r\n            case 3:\r\n                seconds = (parseInt(arr[0], 10) * 60 * 60) + (parseInt(arr[1], 10) * 60) + parseInt(arr[2], 10); break;\r\n            case 2:\r\n                seconds = (parseInt(arr[0], 10) * 60) + parseInt(arr[1], 10); break; \r\n            case 1:\r\n                seconds = parseInt(arr[1], 10); break;\r\n            default: break;\r\n        }\r\n        return seconds;\r\n    }\r\n\r\n    function getSearchResult(searchKey){\r\n        return fetch(`${process.env.REACT_APP_API_BASE_URL}/api/ytdl/search`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            searchKey :searchKey\r\n          }),\r\n        });\r\n    }\r\n\r\n    function getHomePageHTML(){\r\n        return {__html: \"<h1>Hello World</h1>\"}\r\n    }\r\n\r\n    function openPlayer(r){\r\n        if (context.playerState == null | undefined){\r\n            dispatch({type: \"setPlayerState\", snippet: \"max\"});\r\n            setTimeout(() => history.push(`/player1/${r?.videoId}`), 150);\r\n        }\r\n        else if (context.playerState === \"min\" ){\r\n            dispatch({type: \"setPlayerState\", snippet: \"min\"});\r\n        }\r\n        else if (context.playerState === \"max\" ){\r\n            dispatch({type: \"setPlayerState\", snippet: \"max\"});\r\n            setTimeout(() => history.push(`/player1/${r?.videoId}`), 150);\r\n        }\r\n    }\r\n\r\n    function selectSong(e, r){\r\n        e.preventDefault(); \r\n        context.me.removeAttribute('src');\r\n        context.me.load();\r\n        dispatch({type: \"setBufferState\", snippet: \"loading\"})\r\n        dispatch({type: \"setCurrentSong\", snippet: {\r\n            videoId: r?.videoId,\r\n            trackTitle: r?.title,\r\n            albumArtUrl: r?.imageUrl,\r\n        }});\r\n\r\n        setAudioSource(r?.videoId).then(() => {\r\n            console.log(\"track loaded\")\r\n            dispatch({type: \"setBufferState\", snippet: \"loaded\"})\r\n        })\r\n\r\n        openPlayer(r)\r\n    }\r\n\r\n    async function setAudioSource(videoId){\r\n        // await PlayerService.setAudioSource(videoId, context); //Player 2\r\n        await PlayerService.setAudioUrl(videoId, context); //Player 3\r\n    }\r\n\r\n    const CardSkeleton = ({cardNumber}) => {\r\n        return (\r\n            <div style={{  display: 'flex',flexDirection: 'row' , justifyContent: 'space-evenly'}}>\r\n                {\r\n                     Array.from(\r\n                        { length: cardNumber },\r\n                        (_, i) => (\r\n                            <Box key={i} sx={{ pt: 0.5 }} style={{width: '100%', height:'30vh', margin: '2.5%'}}>\r\n                                <Skeleton variant=\"rect\" style={{width: '100%', height:'20vh'}} />\r\n                                <Skeleton />\r\n                                <Skeleton />\r\n                            </Box>\r\n                        )\r\n                    )\r\n                }\r\n                \r\n            </div> \r\n        )\r\n    }\r\n\r\n    return(\r\n        <div className=\"HomePage\">\r\n            <h3 >Welcome Back!</h3>\r\n            {/* <div dangerouslySetInnerHTML={getHomePageHTML()} /> */}\r\n            <h3 style={{'textAlign': 'left'}}>Trending Songs</h3>\r\n            \r\n            {trendingItems == null | undefined ? \r\n            <CardSkeleton cardNumber={2}/>\r\n            :\r\n            <CardSlider items={trendingItems} handleClick={selectSong} />\r\n            }\r\n            <h3 style={{'textAlign': 'left'}}>Picked for you</h3>\r\n            {pickedItems == null | undefined ? \r\n            <CardSkeleton cardNumber={2}/>\r\n            :\r\n            <CardSlider items={pickedItems} handleClick={selectSong} />\r\n            }\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default HomePage;","import PlayerPage from \"./pages/PlayerPage/PlayerPage\";\r\nimport SearchPage from \"./pages/SearchPage/SearchPage\";\r\nimport HomePage from \"./pages/HomePage/HomePage\";\r\n\r\nexport const routes = [\r\n    {\r\n      key: 'home',\r\n      component: HomePage,\r\n      path: '/',\r\n    },\r\n    {\r\n      key: 'search',\r\n      component: SearchPage,\r\n      path: '/search',\r\n    },\r\n    {\r\n      key: 'player',\r\n      component: PlayerPage,\r\n      path: '/player1/:videoId',\r\n    },\r\n  ];","import React from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport { routes } from '../../Routes';\r\nimport './Footer.css'\r\n\r\nexport default function Footer() {\r\n\r\n\r\n    return (\r\n        <div className=\"footerContainer\">\r\n            <ul>\r\n                <li className='link-items'>\r\n                <Link className='link-items' to={routes.find(x => x.key == \"home\")?.path} >\r\n                    <span className=\"material-icons icon\">home</span>\r\n                    <span className='link-text'>Home</span>\r\n                </Link>\r\n                </li>\r\n\r\n                <li className='link-items'>\r\n                <Link className='link-items' to={routes.find(x => x.key == \"search\")?.path} >\r\n                    <span className=\"material-icons icon\">search</span>\r\n                    <span className='link-text'>Search</span>\r\n                </Link>\r\n                </li>\r\n\r\n                <li className='link-items'>\r\n                    <span className=\"material-icons icon\">download</span>\r\n                    <span className='link-text'>Downloads</span>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    );\r\n\r\n}","import React, { useContext, useEffect, useState } from 'react';\nimport './App.css';\nimport { Switch, Route, BrowserRouter} from \"react-router-dom\";\nimport { useLocation } from \"react-router-dom\";\n// import SuggestPage from './pages/SuggestPage/SuggestPage';\nimport MiniPlayer from './components/MiniPlayer/MiniPlayer';\nimport Footer from './components/Footer/Footer';\nimport Header from './components/Header/Header';\nimport { AppContext } from './context/AppContext';\nimport { routes } from './Routes';\nimport { Snackbar } from '@material-ui/core';\n\nfunction App() {\n\n  const [context, dispatch] = useContext(AppContext)\n  const [networkStatus, setNetworkStatus] = useState(true);\n  const location = useLocation();\n\n  useEffect(() => {\n    // console.log(window.location.pathname)\n    console.log(JSON.parse(window.localStorage.getItem('store')));\n    // dispatch({type: \"setStore\", snippet: JSON.parse(window.localStorage.getItem('store'))})\n    console.log('Environment ->', process.env.NODE_ENV);\n    console.log('Api base url ->', process.env.REACT_APP_API_BASE_URL);\n\n    window.addEventListener(\"online\", () => {setNetworkStatus(navigator.onLine)});\n    window.addEventListener(\"offline\", () => {setNetworkStatus(navigator.onLine)});\n    \n\n    return () => {\n      console.log(\"unmount\")\n      window.removeEventListener(\"online\", () => {setNetworkStatus(navigator.onLine)});\n      window.removeEventListener(\"offline\", () => {setNetworkStatus(navigator.onLine)});\n      window.localStorage.setItem('store', JSON.stringify(context));\n    }\n }, []);\n\n//   useEffect(() => {\n    \n//  },[context]);\n\n//  function setNotificationLabel(){\n\n//   if ('mediaSession' in navigator) {\n//     console.log(\"media session works\")\n//   navigator.mediaSession.metadata = new window.MediaMetadata({\n//     title: context.currentSongDetails.trackTitle,\n//     artwork: [\n//       {\n//         src: context.currentSongDetails.albumArtUrl == null || undefined ? '' : context.currentSongDetails.albumArtUrl,\n//         sizes: '512x512',\n//         type: 'image/png',\n//       },\n//     ],\n//   })\n// }\n// }\n\n \n  return (\n    \n    <div className=\"appContainer\">\n        {/* <Header /> */}\n        {/* { !location.pathname.includes(\"player1\") ? <Header /> : null} */}\n        <div className=\"appBody\">\n          <Switch>\n          {routes.map(props => <Route exact {...props} />)} \n          </Switch>\n        </div>\n\n        <div className='bottomContainer'>\n          {context.playerState === \"min\" ? <MiniPlayer /> : null}\n          \n          { !location.pathname.includes(\"player1\") ? <Footer /> : null}\n        </div>\n\n        <Snackbar \n        style={{'zIndex': 10000}}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n        message=\"No internet Connection\"\n        autoHideDuration={5000}\n        open={!networkStatus}\n        />\n\n    </div>\n    // </BrowserRouter>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import { BrowserRouter as Router, Switch, Route} from \"react-router-dom\";\nimport './index.css';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport reportWebVitals from './reportWebVitals';\nimport { ContextWrapper } from './context/AppContext';\nimport { BrowserRouter} from \"react-router-dom\";\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <ContextWrapper>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </ContextWrapper>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.unregister();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}